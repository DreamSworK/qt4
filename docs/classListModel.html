<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Qt 4.8: ListModel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="qt_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qt 4.8
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ListModel Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classListModel.html" title="The ListModel element defines a free-form list data source. ">ListModel</a> element defines a free-form list data source.
 <a href="classListModel.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classListModel.html" title="The ListModel element defines a free-form list data source. ">ListModel</a> element defines a free-form list data source. </p>
<dl class="section since"><dt>Since</dt><dd>4.7</dd></dl>
<p>The <a class="el" href="classListModel.html" title="The ListModel element defines a free-form list data source. ">ListModel</a> is a simple container of <a class="el" href="classListElement.html" title="The ListElement element defines a data item in a ListModel. ">ListElement</a> definitions, each containing data roles. The contents can be defined dynamically, or explicitly in <a class="el" href="classQML.html" title="The QML global Qt object provides useful enums and functions from Qt. ">QML</a>.</p>
<p>The number of elements in the model can be obtained from its <a class="el" href="">count</a> property. A number of familiar methods are also provided to manipulate the contents of the model, including append(), insert(), move(), remove() and <a class="el" href="qtextengine_8cpp.html#a8bd0d236a0fbdb819ebfe949102b5047">set()</a>. These methods accept dictionaries as their arguments; these are translated to <a class="el" href="classListElement.html" title="The ListElement element defines a data item in a ListModel. ">ListElement</a> objects by the model.</p>
<p>Elements can be manipulated via the model using the setProperty() method, which allows the roles of the specified element to be set and changed.</p>
<p><a class="anchor" id="Example-Usage"></a></p><h3>Example Usage</h3>
<p>The following example shows a <a class="el" href="classListModel.html" title="The ListModel element defines a free-form list data source. ">ListModel</a> containing three elements, with the roles "name" and "cost".</p>
<p>{class="float-right"} </p><div class="image">
<img src="listmodel.png" alt="listmodel.png"/>
</div>
 <div class="fragment"><div class="line">import QtQuick 1.0</div><div class="line"></div><div class="line">ListModel {</div><div class="line">    id: fruitModel</div><div class="line"></div><div class="line">    ListElement {</div><div class="line">        name: &quot;Apple&quot;</div><div class="line">        cost: 2.45</div><div class="line">    }</div><div class="line">    ListElement {</div><div class="line">        name: &quot;Orange&quot;</div><div class="line">        cost: 3.25</div><div class="line">    }</div><div class="line">    ListElement {</div><div class="line">        name: &quot;Banana&quot;</div><div class="line">        cost: 1.95</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>  Roles (properties) in each element must begin with a lower-case letter and should be common to all elements in a model. The <a class="el" href="classListElement.html" title="The ListElement element defines a data item in a ListModel. ">ListElement</a> documentation provides more guidelines for how elements should be defined.</p>
<p>Since the example model contains an <code>id</code> property, it can be referenced by views, such as the <a class="el" href="classListView.html" title="The ListView item provides a list view of items provided by a model. ">ListView</a> in this example:</p>
<div class="fragment"><div class="line">import QtQuick 1.0</div><div class="line"></div><div class="line">Rectangle {</div><div class="line">    width: 200; height: 200</div><div class="line"></div><div class="line">    ListModel {</div><div class="line">        id: fruitModel</div></div><!-- fragment --><p> ... 8 </p><div class="fragment"><div class="line">    }</div><div class="line"></div><div class="line">    Component {</div><div class="line">        id: fruitDelegate</div><div class="line">        Row {</div><div class="line">            spacing: 10</div><div class="line">            Text { text: name }</div><div class="line">            Text { text: &#39;$&#39; + cost }</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    ListView {</div><div class="line">        anchors.fill: parent</div><div class="line">        model: fruitModel</div><div class="line">        delegate: fruitDelegate</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p> It is possible for roles to contain list data. In the following example we create a list of fruit attributes:</p>
<div class="fragment"><div class="line">ListModel {</div><div class="line">    id: fruitModel</div><div class="line"></div><div class="line">    ListElement {</div><div class="line">        name: &quot;Apple&quot;</div><div class="line">        cost: 2.45</div><div class="line">        attributes: [</div><div class="line">            ListElement { description: &quot;Core&quot; },</div><div class="line">            ListElement { description: &quot;Deciduous&quot; }</div><div class="line">        ]</div><div class="line">    }</div><div class="line">    ListElement {</div><div class="line">        name: &quot;Orange&quot;</div><div class="line">        cost: 3.25</div><div class="line">        attributes: [</div><div class="line">            ListElement { description: &quot;Citrus&quot; }</div><div class="line">        ]</div><div class="line">    }</div><div class="line">    ListElement {</div><div class="line">        name: &quot;Banana&quot;</div><div class="line">        cost: 1.95</div><div class="line">        attributes: [</div><div class="line">            ListElement { description: &quot;Tropical&quot; },</div><div class="line">            ListElement { description: &quot;Seedless&quot; }</div><div class="line">        ]</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p> The delegate displays all the fruit attributes:</p>
<p>{class="float-right"} </p><div class="image">
<img src="listmodel-nested.png" alt="listmodel-nested.png"/>
</div>
 <div class="fragment"><div class="line">Component {</div><div class="line">    id: fruitDelegate</div><div class="line">    Item {</div><div class="line">        width: 200; height: 50</div><div class="line">        Text { id: nameField; text: name }</div><div class="line">        Text { text: &#39;$&#39; + cost; anchors.left: nameField.right }</div><div class="line">        Row {</div><div class="line">            anchors.top: nameField.bottom</div><div class="line">            spacing: 5</div><div class="line">            Text { text: &quot;Attributes:&quot; }</div><div class="line">            Repeater {</div><div class="line">                model: attributes</div><div class="line">                Text { text: description } </div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>  <a class="anchor" id="Modifying-List-Models"></a></p><h3>Modifying List Models</h3>
<p>The content of a <a class="el" href="classListModel.html" title="The ListModel element defines a free-form list data source. ">ListModel</a> may be created and modified using the <a class="el" href="qvariant_8cpp.html#a4ef7fd005d27553c9afa0e72dde91575">clear()</a>, append(), <a class="el" href="qtextengine_8cpp.html#a8bd0d236a0fbdb819ebfe949102b5047">set()</a>, insert() and setProperty() methods. For example:</p>
<div class="fragment"><div class="line">    Component {</div><div class="line">        id: fruitDelegate</div><div class="line">        Item {</div><div class="line">            width: 200; height: 50</div><div class="line">            Text { text: name }</div><div class="line">            Text { text: &#39;$&#39; + cost; anchors.right: parent.right }</div><div class="line"></div><div class="line">            // Double the price when clicked.</div><div class="line">            MouseArea {</div><div class="line">                anchors.fill: parent</div><div class="line">                onClicked: fruitModel.setProperty(index, &quot;cost&quot;, cost * 2)</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div></div><!-- fragment --><p> Note that when creating content dynamically the set of available properties cannot be changed once set. Whatever properties are first added to the model are the only permitted properties in the model.</p>
<p><a class="anchor" id="Using-Threaded-List-Models-with-WorkerScript"></a></p><h3>Using Threaded List Models with <a class="el" href="classWorkerScript.html" title="The WorkerScript element enables the use of threads in QML. ">WorkerScript</a></h3>
<p><a class="el" href="classListModel.html" title="The ListModel element defines a free-form list data source. ">ListModel</a> can be used together with <a class="el" href="classWorkerScript.html" title="The WorkerScript element enables the use of threads in QML. ">WorkerScript</a> access a list model from multiple threads. This is useful if list modifications are synchronous and take some time: the list operations can be moved to a different thread to avoid blocking of the main GUI thread.</p>
<p>Here is an example that uses <a class="el" href="classWorkerScript.html" title="The WorkerScript element enables the use of threads in QML. ">WorkerScript</a> to periodically append the current time to a list model:</p>
<div class="fragment"></div><!-- fragment --><p> The included file, <code>dataloader.js</code>, looks like this:</p>
<div class="fragment"></div><!-- fragment --><p> The timer in the main example sends messages to the worker script by calling <a class="el" href="">WorkerScript::sendMessage()</a> . When this message is received, WorkerScript.onMessage() is invoked in <code>dataloader.js</code>, which appends the current time to the list model.</p>
<p>Note the call to sync() from the WorkerScript.onMessage() handler. You must call sync() or else the changes made to the list from the external thread will not be reflected in the list model in the main thread.</p>
<p><a class="anchor" id="Restrictions"></a></p><h3>Restrictions</h3>
<p>If a list model is to be accessed from a <a class="el" href="classWorkerScript.html" title="The WorkerScript element enables the use of threads in QML. ">WorkerScript</a>, it cannot contain list-type data. So, the following model cannot be used from a <a class="el" href="classWorkerScript.html" title="The WorkerScript element enables the use of threads in QML. ">WorkerScript</a> because of the list contained in the "attributes" property:</p>
<div class="fragment"><div class="line"><a class="code" href="classListModel.html">ListModel</a> {</div><div class="line">    id: fruitModel</div><div class="line">    <a class="code" href="classListElement.html">ListElement</a> {</div><div class="line">        <a class="code" href="qkeysequence_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>: <span class="stringliteral">&quot;Apple&quot;</span></div><div class="line">        cost: 2.45</div><div class="line">        attributes: [</div><div class="line">            <a class="code" href="classListElement.html">ListElement</a> { description: <span class="stringliteral">&quot;Core&quot;</span> },</div><div class="line">            <a class="code" href="classListElement.html">ListElement</a> { description: <span class="stringliteral">&quot;Deciduous&quot;</span> }</div><div class="line">        ]</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>In addition, the <a class="el" href="classWorkerScript.html" title="The WorkerScript element enables the use of threads in QML. ">WorkerScript</a> cannot add list-type data to the model.</p>
<dl class="section see"><dt>See also</dt><dd>{qmlmodels}{<a class="el" href="qutfcodec_8cpp.html#adc29c2ff13d900c2f185ee95427fb06caa9703801ac7bd790f6f980532e4224c0">Data</a> Models}, {declarative/threading/threadedlistmodel}{Threaded <a class="el" href="classListModel.html" title="The ListModel element defines a free-form list data source. ">ListModel</a> example}, QtDeclarative </dd></dl>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li>/src/declarative/util/<a class="el" href="qdeclarativelistmodel_8cpp_source.html">qdeclarativelistmodel.cpp</a></li>
</ul>
</div><!-- contents -->

<hr class="footer"/><address class="footer"><small><a href="https://dreamswork.github.io/qt4/">Qt 4.8 Source Code Browser</a></small></address>
</body>
</html>
