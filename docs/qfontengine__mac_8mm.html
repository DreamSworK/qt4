<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Qt 4.8: /src/gui/text/qfontengine_mac.mm File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="qt_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qt 4.8
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1427e6b9e14483d8a13b4ea1c69420e3.html">qt-4.8.6</a></li><li class="navelem"><a class="el" href="dir_42c0970699667688278d00b1a5e7112e.html">src</a></li><li class="navelem"><a class="el" href="dir_079600a9700e7f89459fcd6c0090021f.html">gui</a></li><li class="navelem"><a class="el" href="dir_421173b88df5cd77ea9205380d4a6bf9.html">text</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">qfontengine_mac.mm File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="qfontengine__mac__p_8h_source.html">qfontengine_mac_p.h</a>&quot;</code><br />
<code>#include &lt;private/qapplication_p.h&gt;</code><br />
<code>#include &lt;private/qfontengine_p.h&gt;</code><br />
<code>#include &lt;private/qpainter_p.h&gt;</code><br />
<code>#include &lt;private/qtextengine_p.h&gt;</code><br />
<code>#include &lt;<a class="el" href="qbitmap_8h_source.html">qbitmap.h</a>&gt;</code><br />
<code>#include &lt;private/qpaintengine_mac_p.h&gt;</code><br />
<code>#include &lt;private/qprintengine_mac_p.h&gt;</code><br />
<code>#include &lt;<a class="el" href="qglobal_8h_source.html">qglobal.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="qpixmap_8h_source.html">qpixmap.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="qpixmapcache_8h_source.html">qpixmapcache.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="qvarlengtharray_8h_source.html">qvarlengtharray.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="qdebug_8h_source.html">qdebug.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="qendian_8h_source.html">qendian.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="qmath_8h_source.html">qmath.h</a>&gt;</code><br />
<code>#include &lt;private/qimage_p.h&gt;</code><br />
<code>#include &lt;ApplicationServices/ApplicationServices.h&gt;</code><br />
<code>#include &lt;AppKit/AppKit.h&gt;</code><br />
</div>
<p><a href="qfontengine__mac_8mm_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structQGlyphLayoutInfo.html">QGlyphLayoutInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQMacFontPath.html">QMacFontPath</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae59689e3fc5f4903d26f7fcc954f68c9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfontengine__mac_8mm.html#ae59689e3fc5f4903d26f7fcc954f68c9">FixedToQFixed</a>(<a class="el" href="qsslsocket__openssl__symbols_8cpp.html#abc0559ca5bd02e98c3e33a2db3f27fc2">a</a>)&#160;&#160;&#160;<a class="el" href="structQFixed.html#ad868d8d4e105f35387aff92c5e6a11d9">QFixed::fromFixed</a>((<a class="el" href="qsslsocket__openssl__symbols_8cpp.html#abc0559ca5bd02e98c3e33a2db3f27fc2">a</a>) &gt;&gt; 10)</td></tr>
<tr class="separator:ae59689e3fc5f4903d26f7fcc954f68c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addd4a3949b9d942eef2cdc721c6a6a7f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfontengine__mac_8mm.html#addd4a3949b9d942eef2cdc721c6a6a7f">QFixedToFixed</a>(x)&#160;&#160;&#160;((x).value() &lt;&lt; 10)</td></tr>
<tr class="separator:addd4a3949b9d942eef2cdc721c6a6a7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aecd4f0c32a32fe16152ae2fc60de0737"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfontengine__mac_8mm.html#aecd4f0c32a32fe16152ae2fc60de0737">addGlyphsToPathHelper</a> (ATSUStyle style, <a class="el" href="qtextureglyphcache__p_8h.html#a86831ae2735fd5404f087b194aa7fdaa">glyph_t</a> *glyphs, <a class="el" href="structQFixedPoint.html">QFixedPoint</a> *<a class="el" href="qcssparser_8cpp.html#a82ccda1228c983e0f912bd005d8e17eb">positions</a>, int numGlyphs, <a class="el" href="classQPainterPath.html">QPainterPath</a> *path)</td></tr>
<tr class="separator:aecd4f0c32a32fe16152ae2fc60de0737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af29b9a44d5298b73b8bbfba3ab44e8bf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="qmacdefines__mac_8h.html#a3558682280c7331d128912d3edd21a61">OSStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfontengine__mac_8mm.html#af29b9a44d5298b73b8bbfba3ab44e8bf">atsuPostLayoutCallback</a> (ATSULayoutOperationSelector selector, ATSULineRef lineRef, URefCon refCon, void *operationExtraParameter, ATSULayoutOperationCallbackStatus *callbackStatus)</td></tr>
<tr class="separator:af29b9a44d5298b73b8bbfba3ab44e8bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23f5751b6e5cc3c0e3eeac14f6f3588"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfontengine__mac_8mm.html#ab23f5751b6e5cc3c0e3eeac14f6f3588">getChar</a> (const <a class="el" href="classQChar.html">QChar</a> *str, int &amp;i, const int len)</td></tr>
<tr class="separator:ab23f5751b6e5cc3c0e3eeac14f6f3588"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6b6afd731a7f3fa550444615f21892c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfontengine__mac_8mm.html#a6b6afd731a7f3fa550444615f21892c7">qt_antialiasing_threshold</a></td></tr>
<tr class="separator:a6b6afd731a7f3fa550444615f21892c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae59689e3fc5f4903d26f7fcc954f68c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae59689e3fc5f4903d26f7fcc954f68c9">&#9670;&nbsp;</a></span>FixedToQFixed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FixedToQFixed</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="qsslsocket__openssl__symbols_8cpp.html#abc0559ca5bd02e98c3e33a2db3f27fc2">a</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="structQFixed.html#ad868d8d4e105f35387aff92c5e6a11d9">QFixed::fromFixed</a>((<a class="el" href="qsslsocket__openssl__symbols_8cpp.html#abc0559ca5bd02e98c3e33a2db3f27fc2">a</a>) &gt;&gt; 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qfontengine__mac_8mm_source.html#l00073">73</a> of file <a class="el" href="qfontengine__mac_8mm_source.html">qfontengine_mac.mm</a>.</p>

<p class="reference">Referenced by <a class="el" href="qfontengine__mac_8mm_source.html#l00221">atsuPostLayoutCallback()</a>.</p>

</div>
</div>
<a id="addd4a3949b9d942eef2cdc721c6a6a7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addd4a3949b9d942eef2cdc721c6a6a7f">&#9670;&nbsp;</a></span>QFixedToFixed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QFixedToFixed</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;((x).value() &lt;&lt; 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qfontengine__mac_8mm_source.html#l00074">74</a> of file <a class="el" href="qfontengine__mac_8mm_source.html">qfontengine_mac.mm</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aecd4f0c32a32fe16152ae2fc60de0737"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd4f0c32a32fe16152ae2fc60de0737">&#9670;&nbsp;</a></span>addGlyphsToPathHelper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void addGlyphsToPathHelper </td>
          <td>(</td>
          <td class="paramtype">ATSUStyle&#160;</td>
          <td class="paramname"><em>style</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qtextureglyphcache__p_8h.html#a86831ae2735fd5404f087b194aa7fdaa">glyph_t</a> *&#160;</td>
          <td class="paramname"><em>glyphs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structQFixedPoint.html">QFixedPoint</a> *&#160;</td>
          <td class="paramname"><em>positions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numGlyphs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classQPainterPath.html">QPainterPath</a> *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qfontengine__mac_8mm_source.html#l00890">890</a> of file <a class="el" href="qfontengine__mac_8mm_source.html">qfontengine_mac.mm</a>.</p>

<p class="reference">Referenced by <a class="el" href="qfontengine__mac_8mm_source.html#l00918">QFontEngineMac::addGlyphsToPath()</a>, and <a class="el" href="qfontengine__mac_8mm_source.html#l01183">QFontEngineMac::getUnscaledGlyph()</a>.</p>
<div class="fragment"><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;{</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">if</span> (!numGlyphs)</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <a class="code" href="qmacdefines__mac_8h.html#a3558682280c7331d128912d3edd21a61">OSStatus</a> e;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="classQMacFontPath.html">QMacFontPath</a> fontpath(0, 0, path);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    ATSCubicMoveToUPP moveTo = NewATSCubicMoveToUPP(<a class="code" href="classQMacFontPath.html#a68b763aa377b6eb221952084330a5507">QMacFontPath::moveTo</a>);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    ATSCubicLineToUPP lineTo = NewATSCubicLineToUPP(<a class="code" href="classQMacFontPath.html#a5a430911707ee950550c5786ec375555">QMacFontPath::lineTo</a>);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    ATSCubicCurveToUPP cubicTo = NewATSCubicCurveToUPP(<a class="code" href="classQMacFontPath.html#af66868de1da14f523bae49a8685eaab3">QMacFontPath::cubicTo</a>);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    ATSCubicClosePathUPP closePath = NewATSCubicClosePathUPP(<a class="code" href="classQMacFontPath.html#af79d93e11390fcf66cc8a9f341d61147">QMacFontPath::closePath</a>);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">// CTFontCreatePathForGlyph</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numGlyphs; ++i) {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <a class="code" href="qfontsubset_8cpp.html#abe5e4b8f28b508be929b870eebd9f69d">GlyphID</a> glyph = glyphs[i];</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        fontpath.setPosition(positions[i].x.toReal(), positions[i].<a class="code" href="structQFixedPoint.html#a1b4227ee400bdabb1450b872df978fb2">y</a>.<a class="code" href="structQFixed.html#a9867daa051679414c3189852234171b2">toReal</a>());</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        ATSUGlyphGetCubicPaths(style, glyph, moveTo, lineTo,</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                               cubicTo, closePath, &amp;fontpath, &amp;e);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    DisposeATSCubicMoveToUPP(moveTo);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    DisposeATSCubicLineToUPP(lineTo);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    DisposeATSCubicCurveToUPP(cubicTo);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    DisposeATSCubicClosePathUPP(closePath);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;}</div><div class="ttc" id="classQMacFontPath_html_af79d93e11390fcf66cc8a9f341d61147"><div class="ttname"><a href="classQMacFontPath.html#af79d93e11390fcf66cc8a9f341d61147">QMacFontPath::closePath</a></div><div class="ttdeci">static OSStatus closePath(void *)</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00118">qfontengine_mac.mm:118</a></div></div>
<div class="ttc" id="classQMacFontPath_html_a5a430911707ee950550c5786ec375555"><div class="ttname"><a href="classQMacFontPath.html#a5a430911707ee950550c5786ec375555">QMacFontPath::lineTo</a></div><div class="ttdeci">static OSStatus lineTo(const Float32Point *, void *)</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00092">qfontengine_mac.mm:92</a></div></div>
<div class="ttc" id="classQMacFontPath_html_af66868de1da14f523bae49a8685eaab3"><div class="ttname"><a href="classQMacFontPath.html#af66868de1da14f523bae49a8685eaab3">QMacFontPath::cubicTo</a></div><div class="ttdeci">static OSStatus cubicTo(const Float32Point *, const Float32Point *, const Float32Point *, void *)</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00100">qfontengine_mac.mm:100</a></div></div>
<div class="ttc" id="classQMacFontPath_html_a68b763aa377b6eb221952084330a5507"><div class="ttname"><a href="classQMacFontPath.html#a68b763aa377b6eb221952084330a5507">QMacFontPath::moveTo</a></div><div class="ttdeci">static OSStatus moveTo(const Float32Point *, void *)</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00111">qfontengine_mac.mm:111</a></div></div>
<div class="ttc" id="structQFixedPoint_html_a1b4227ee400bdabb1450b872df978fb2"><div class="ttname"><a href="structQFixedPoint.html#a1b4227ee400bdabb1450b872df978fb2">QFixedPoint::y</a></div><div class="ttdeci">QFixed y</div><div class="ttdef"><b>Definition:</b> <a href="qfixed__p_8h_source.html#l00191">qfixed_p.h:191</a></div></div>
<div class="ttc" id="qmacdefines__mac_8h_html_a3558682280c7331d128912d3edd21a61"><div class="ttname"><a href="qmacdefines__mac_8h.html#a3558682280c7331d128912d3edd21a61">OSStatus</a></div><div class="ttdeci">signed long OSStatus</div><div class="ttdef"><b>Definition:</b> <a href="qmacdefines__mac_8h_source.html#l00105">qmacdefines_mac.h:105</a></div></div>
<div class="ttc" id="qfontsubset_8cpp_html_abe5e4b8f28b508be929b870eebd9f69d"><div class="ttname"><a href="qfontsubset_8cpp.html#abe5e4b8f28b508be929b870eebd9f69d">GlyphID</a></div><div class="ttdeci">quint16 GlyphID</div><div class="ttdef"><b>Definition:</b> <a href="qfontsubset_8cpp_source.html#l00546">qfontsubset.cpp:546</a></div></div>
<div class="ttc" id="structQFixed_html_a9867daa051679414c3189852234171b2"><div class="ttname"><a href="structQFixed.html#a9867daa051679414c3189852234171b2">QFixed::toReal</a></div><div class="ttdeci">qreal toReal() const</div><div class="ttdef"><b>Definition:</b> <a href="qfixed__p_8h_source.html#l00077">qfixed_p.h:77</a></div></div>
<div class="ttc" id="classQMacFontPath_html"><div class="ttname"><a href="classQMacFontPath.html">QMacFontPath</a></div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00077">qfontengine_mac.mm:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af29b9a44d5298b73b8bbfba3ab44e8bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af29b9a44d5298b73b8bbfba3ab44e8bf">&#9670;&nbsp;</a></span>atsuPostLayoutCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="qmacdefines__mac_8h.html#a3558682280c7331d128912d3edd21a61">OSStatus</a> atsuPostLayoutCallback </td>
          <td>(</td>
          <td class="paramtype">ATSULayoutOperationSelector&#160;</td>
          <td class="paramname"><em>selector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ATSULineRef&#160;</td>
          <td class="paramname"><em>lineRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">URefCon&#160;</td>
          <td class="paramname"><em>refCon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>operationExtraParameter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ATSULayoutOperationCallbackStatus *&#160;</td>
          <td class="paramname"><em>callbackStatus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qfontengine__mac_8mm_source.html#l00221">221</a> of file <a class="el" href="qfontengine__mac_8mm_source.html">qfontengine_mac.mm</a>.</p>

<p class="reference">Referenced by <a class="el" href="qfontengine__mac_8mm_source.html#l00447">QFontEngineMacMulti::stringToCMapInternal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(selector);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(operationExtraParameter);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="structQGlyphLayoutInfo.html">QGlyphLayoutInfo</a> *nfo = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structQGlyphLayoutInfo.html">QGlyphLayoutInfo</a> *<span class="keyword">&gt;</span>(refCon);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#ac952a02bfb3d1a1909c44e933f5a7dbe">callbackCalled</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    ATSLayoutRecord *layoutData = 0;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    ItemCount itemCount = 0;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="qmacdefines__mac_8h.html#a3558682280c7331d128912d3edd21a61">OSStatus</a> e = noErr;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    e = ATSUDirectGetLayoutDataArrayPtrFromLineRef(lineRef, kATSUDirectDataLayoutRecordATSLayoutRecordCurrent,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                                   <span class="comment">/*iCreate =*/</span> <span class="keyword">false</span>,</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                                   (<span class="keywordtype">void</span> **) &amp;layoutData,</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                                   &amp;itemCount);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (e != noErr)</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    *nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a0bc97e29359207b9116771051671e832">numGlyphs</a> = itemCount - 1;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    Fixed *baselineDeltas = 0;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    e = ATSUDirectGetLayoutDataArrayPtrFromLineRef(lineRef, kATSUDirectDataBaselineDeltaFixedArray,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                                   <span class="comment">/*iCreate =*/</span> <span class="keyword">true</span>,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                                   (<span class="keywordtype">void</span> **) &amp;baselineDeltas,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                                   &amp;itemCount);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (e != noErr)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">int</span> nextCharStop = -1;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">int</span> currentClusterGlyph = -1; <span class="comment">// first glyph in log cluster</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html">QFontEngineMacMulti::ShaperItem</a> *item = nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#acf639f88f6c384aca73f8f8db20a2ab6">shaperItem</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a1cdd8bfcbb2fdd70899c636d4152f244">charAttributes</a>) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        item = nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#acf639f88f6c384aca73f8f8db20a2ab6">shaperItem</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#if !defined(QT_NO_DEBUG)</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordtype">int</span> surrogates = 0;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keyword">const</span> <a class="code" href="classQChar.html">QChar</a> *str = item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a80856ffea60fc317e49d21e800bd8154">string</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a57287f137c9a3660ca03eab3cf4517dc">from</a>; i &lt; item-&gt;from + item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a7669ded658bc53510f37a3c272d3aa0d">length</a> - 1; ++i)</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            surrogates += (str[i].<a class="code" href="classQChar.html#a2ca74c91c7426f7acf63cad65d2b89b4">isHighSurrogate</a>() &amp;&amp; str[i+1].<a class="code" href="classQChar.html#ab2027bc9c87e738d764f52354ff7c024">isLowSurrogate</a>());</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">for</span> (nextCharStop = item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a57287f137c9a3660ca03eab3cf4517dc">from</a>; nextCharStop &lt; item-&gt;from + item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a7669ded658bc53510f37a3c272d3aa0d">length</a>; ++nextCharStop)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">if</span> (item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a1cdd8bfcbb2fdd70899c636d4152f244">charAttributes</a>[nextCharStop].charStop)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        nextCharStop -= item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a57287f137c9a3660ca03eab3cf4517dc">from</a>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a6931ea4ae620f7ff398a7d5cc4f5bcbe">glyphs</a>-&gt;<a class="code" href="structQGlyphLayout.html#a148d1f735697788d627fa32801d73de4">attributes</a>[0].clusterStart = <span class="keyword">true</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">int</span> glyphIdx = 0;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">int</span> glyphIncrement = 1;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span> (nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#ac7b144bf26d9fd2fec9e9bfa6e211321">flags</a> &amp; <a class="code" href="classQTextEngine.html#a04203ae14beb51714e7352e17ba9d095a066e340532a74be0a2cf8db0a4d2478b">QTextEngine::RightToLeft</a>) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        glyphIdx  = itemCount - 2;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        glyphIncrement = -1;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; *nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a0bc97e29359207b9116771051671e832">numGlyphs</a>; ++i, glyphIdx += glyphIncrement) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordtype">int</span> charOffset = layoutData[glyphIdx].originalOffset / <span class="keyword">sizeof</span>(UniChar);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> fontIdx = nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a00b927a4606b13e3774ff4ab786af308">mappedFonts</a>[charOffset];</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        ATSGlyphRef glyphId = layoutData[glyphIdx].glyphID;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <a class="code" href="structQFixed.html">QFixed</a> yAdvance = <a class="code" href="qfontengine__mac_8mm.html#ae59689e3fc5f4903d26f7fcc954f68c9">FixedToQFixed</a>(baselineDeltas[glyphIdx]);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="structQFixed.html">QFixed</a> xAdvance = <a class="code" href="qfontengine__mac_8mm.html#ae59689e3fc5f4903d26f7fcc954f68c9">FixedToQFixed</a>(layoutData[glyphIdx + 1].realPos - layoutData[glyphIdx].realPos);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span> (nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a7a18704e8f199f580aad1276e9637a0d">styleStrategy</a> &amp; <a class="code" href="classQFont.html#ae6f040a8158d680c6982a6b1343a201da486e5326e4585413352ee4989ab1d13b">QFont::ForceIntegerMetrics</a>) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            yAdvance = yAdvance.<a class="code" href="structQFixed.html#af445ed678763d7781173db80622c4ed9">round</a>();</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            xAdvance = xAdvance.<a class="code" href="structQFixed.html#af445ed678763d7781173db80622c4ed9">round</a>();</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">if</span> (glyphId != 0xffff || i == 0) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span> (i &lt; nfo-&gt;glyphs-&gt;numGlyphs)</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a6931ea4ae620f7ff398a7d5cc4f5bcbe">glyphs</a>-&gt;<a class="code" href="structQGlyphLayout.html#a57be91dc89f08ce1e5d2fa760dff2ab9">glyphs</a>[i] = (glyphId &amp; 0x00ffffff) | (fontIdx &lt;&lt; 24);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a6931ea4ae620f7ff398a7d5cc4f5bcbe">glyphs</a>-&gt;<a class="code" href="structQGlyphLayout.html#ad4a4dda2eadb17f045d5451806a5291b">advances_y</a>[i] = yAdvance;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a6931ea4ae620f7ff398a7d5cc4f5bcbe">glyphs</a>-&gt;<a class="code" href="structQGlyphLayout.html#ac36596f9314143684faaa8cb68300fe1">advances_x</a>[i] = xAdvance;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="comment">// ATSUI gives us 0xffff as glyph id at the index in the glyph array for</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="comment">// a character position that maps to a ligtature. Such a glyph id does not</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="comment">// result in any visual glyph, but it may have an advance, which is why we</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="comment">// sum up the glyph advances.</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            --i;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a6931ea4ae620f7ff398a7d5cc4f5bcbe">glyphs</a>-&gt;<a class="code" href="structQGlyphLayout.html#ad4a4dda2eadb17f045d5451806a5291b">advances_y</a>[i] += yAdvance;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a6931ea4ae620f7ff398a7d5cc4f5bcbe">glyphs</a>-&gt;<a class="code" href="structQGlyphLayout.html#ac36596f9314143684faaa8cb68300fe1">advances_x</a>[i] += xAdvance;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            *nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a0bc97e29359207b9116771051671e832">numGlyphs</a> -= 1;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span> (item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#aa29ec51338da1073652f98a988a9153a">log_clusters</a>) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">if</span> (charOffset &gt;= nextCharStop) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                nfo-&gt;<a class="code" href="structQGlyphLayoutInfo.html#a6931ea4ae620f7ff398a7d5cc4f5bcbe">glyphs</a>-&gt;<a class="code" href="structQGlyphLayout.html#a148d1f735697788d627fa32801d73de4">attributes</a>[i].clusterStart = <span class="keyword">true</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                currentClusterGlyph = i;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                ++nextCharStop;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="keywordflow">for</span> (; nextCharStop &lt; item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a7669ded658bc53510f37a3c272d3aa0d">length</a>; ++nextCharStop)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    <span class="keywordflow">if</span> (item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a1cdd8bfcbb2fdd70899c636d4152f244">charAttributes</a>[item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a57287f137c9a3660ca03eab3cf4517dc">from</a> + nextCharStop].charStop)</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="keywordflow">if</span> (currentClusterGlyph == -1)</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                    currentClusterGlyph = i;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#aa29ec51338da1073652f98a988a9153a">log_clusters</a>[charOffset] = currentClusterGlyph;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="comment">// surrogate handling</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="keywordflow">if</span> (charOffset &lt; item-&gt;length - 1) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <a class="code" href="classQChar.html">QChar</a> current = item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a80856ffea60fc317e49d21e800bd8154">string</a>[item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a57287f137c9a3660ca03eab3cf4517dc">from</a> + charOffset];</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                <a class="code" href="classQChar.html">QChar</a> next = item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a80856ffea60fc317e49d21e800bd8154">string</a>[item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#a57287f137c9a3660ca03eab3cf4517dc">from</a> + charOffset + 1];</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <span class="keywordflow">if</span> (current.<a class="code" href="classQChar.html#a2ca74c91c7426f7acf63cad65d2b89b4">isHighSurrogate</a>() &amp;&amp; next.<a class="code" href="classQChar.html#ab2027bc9c87e738d764f52354ff7c024">isLowSurrogate</a>())</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    item-&gt;<a class="code" href="structQFontEngineMacMulti_1_1ShaperItem.html#aa29ec51338da1073652f98a988a9153a">log_clusters</a>[charOffset + 1] = currentClusterGlyph;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">    if (item) {</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">        qDebug() &lt;&lt; &quot;resulting logclusters:&quot;;</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">        for (int i = 0; i &lt; item-&gt;length; ++i)</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">            qDebug() &lt;&lt; &quot;logClusters[&quot; &lt;&lt; i &lt;&lt; &quot;] =&quot; &lt;&lt; item-&gt;log_clusters[i];</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">        qDebug() &lt;&lt; &quot;clusterstarts:&quot;;</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">        for (int i = 0; i &lt; *nfo-&gt;numGlyphs; ++i)</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">            qDebug() &lt;&lt; &quot;clusterStart[&quot; &lt;&lt; i &lt;&lt; &quot;] =&quot; &lt;&lt; nfo-&gt;glyphs[i].attributes.clusterStart;</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    ATSUDirectReleaseLayoutDataArrayPtr(lineRef, kATSUDirectDataBaselineDeltaFixedArray,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                        (<span class="keywordtype">void</span> **) &amp;baselineDeltas);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    ATSUDirectReleaseLayoutDataArrayPtr(lineRef, kATSUDirectDataLayoutRecordATSLayoutRecordCurrent,</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                        (<span class="keywordtype">void</span> **) &amp;layoutData);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    *callbackStatus = kATSULayoutOperationCallbackStatusHandled;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> noErr;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div><div class="ttc" id="structQFontEngineMacMulti_1_1ShaperItem_html"><div class="ttname"><a href="structQFontEngineMacMulti_1_1ShaperItem.html">QFontEngineMacMulti::ShaperItem</a></div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac__p_8h_source.html#l00118">qfontengine_mac_p.h:118</a></div></div>
<div class="ttc" id="classQFont_html_ae6f040a8158d680c6982a6b1343a201da486e5326e4585413352ee4989ab1d13b"><div class="ttname"><a href="classQFont.html#ae6f040a8158d680c6982a6b1343a201da486e5326e4585413352ee4989ab1d13b">QFont::ForceIntegerMetrics</a></div><div class="ttdef"><b>Definition:</b> <a href="qfont_8h_source.html#l00092">qfont.h:92</a></div></div>
<div class="ttc" id="structQFontEngineMacMulti_1_1ShaperItem_html_a80856ffea60fc317e49d21e800bd8154"><div class="ttname"><a href="structQFontEngineMacMulti_1_1ShaperItem.html#a80856ffea60fc317e49d21e800bd8154">QFontEngineMacMulti::ShaperItem::string</a></div><div class="ttdeci">const QChar * string</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac__p_8h_source.html#l00123">qfontengine_mac_p.h:123</a></div></div>
<div class="ttc" id="qfontengine__mac_8mm_html_ae59689e3fc5f4903d26f7fcc954f68c9"><div class="ttname"><a href="qfontengine__mac_8mm.html#ae59689e3fc5f4903d26f7fcc954f68c9">FixedToQFixed</a></div><div class="ttdeci">#define FixedToQFixed(a)</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00073">qfontengine_mac.mm:73</a></div></div>
<div class="ttc" id="structQGlyphLayout_html_ad4a4dda2eadb17f045d5451806a5291b"><div class="ttname"><a href="structQGlyphLayout.html#ad4a4dda2eadb17f045d5451806a5291b">QGlyphLayout::advances_y</a></div><div class="ttdeci">QFixed * advances_y</div><div class="ttdef"><b>Definition:</b> <a href="qtextengine__p_8h_source.html#l00174">qtextengine_p.h:174</a></div></div>
<div class="ttc" id="structQGlyphLayout_html_ac36596f9314143684faaa8cb68300fe1"><div class="ttname"><a href="structQGlyphLayout.html#ac36596f9314143684faaa8cb68300fe1">QGlyphLayout::advances_x</a></div><div class="ttdeci">QFixed * advances_x</div><div class="ttdef"><b>Definition:</b> <a href="qtextengine__p_8h_source.html#l00173">qtextengine_p.h:173</a></div></div>
<div class="ttc" id="structQGlyphLayout_html_a57be91dc89f08ce1e5d2fa760dff2ab9"><div class="ttname"><a href="structQGlyphLayout.html#a57be91dc89f08ce1e5d2fa760dff2ab9">QGlyphLayout::glyphs</a></div><div class="ttdeci">HB_Glyph * glyphs</div><div class="ttdef"><b>Definition:</b> <a href="qtextengine__p_8h_source.html#l00172">qtextengine_p.h:172</a></div></div>
<div class="ttc" id="structQGlyphLayoutInfo_html_ac952a02bfb3d1a1909c44e933f5a7dbe"><div class="ttname"><a href="structQGlyphLayoutInfo.html#ac952a02bfb3d1a1909c44e933f5a7dbe">QGlyphLayoutInfo::callbackCalled</a></div><div class="ttdeci">bool callbackCalled</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00214">qfontengine_mac.mm:214</a></div></div>
<div class="ttc" id="classQChar_html_ab2027bc9c87e738d764f52354ff7c024"><div class="ttname"><a href="classQChar.html#ab2027bc9c87e738d764f52354ff7c024">QChar::isLowSurrogate</a></div><div class="ttdeci">bool isLowSurrogate() const</div><div class="ttdoc">Returns true if the QChar is the low part of a utf16 surrogate (ie. </div><div class="ttdef"><b>Definition:</b> <a href="qchar_8h_source.html#l00279">qchar.h:279</a></div></div>
<div class="ttc" id="structQGlyphLayoutInfo_html_a7a18704e8f199f580aad1276e9637a0d"><div class="ttname"><a href="structQGlyphLayoutInfo.html#a7a18704e8f199f580aad1276e9637a0d">QGlyphLayoutInfo::styleStrategy</a></div><div class="ttdeci">unsigned int styleStrategy</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00218">qfontengine_mac.mm:218</a></div></div>
<div class="ttc" id="structQGlyphLayoutInfo_html_a00b927a4606b13e3774ff4ab786af308"><div class="ttname"><a href="structQGlyphLayoutInfo.html#a00b927a4606b13e3774ff4ab786af308">QGlyphLayoutInfo::mappedFonts</a></div><div class="ttdeci">int * mappedFonts</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00215">qfontengine_mac.mm:215</a></div></div>
<div class="ttc" id="classQTextEngine_html_a04203ae14beb51714e7352e17ba9d095a066e340532a74be0a2cf8db0a4d2478b"><div class="ttname"><a href="classQTextEngine.html#a04203ae14beb51714e7352e17ba9d095a066e340532a74be0a2cf8db0a4d2478b">QTextEngine::RightToLeft</a></div><div class="ttdef"><b>Definition:</b> <a href="qtextengine__p_8h_source.html#l00458">qtextengine_p.h:458</a></div></div>
<div class="ttc" id="classQChar_html_a2ca74c91c7426f7acf63cad65d2b89b4"><div class="ttname"><a href="classQChar.html#a2ca74c91c7426f7acf63cad65d2b89b4">QChar::isHighSurrogate</a></div><div class="ttdeci">bool isHighSurrogate() const</div><div class="ttdoc">Returns true if the QChar is the high part of a utf16 surrogate (ie. </div><div class="ttdef"><b>Definition:</b> <a href="qchar_8h_source.html#l00276">qchar.h:276</a></div></div>
<div class="ttc" id="structQFixed_html"><div class="ttname"><a href="structQFixed.html">QFixed</a></div><div class="ttdef"><b>Definition:</b> <a href="qfixed__p_8h_source.html#l00062">qfixed_p.h:62</a></div></div>
<div class="ttc" id="classQChar_html"><div class="ttname"><a href="classQChar.html">QChar</a></div><div class="ttdoc">The QChar class provides a 16-bit Unicode character. </div><div class="ttdef"><b>Definition:</b> <a href="qchar_8h_source.html#l00072">qchar.h:72</a></div></div>
<div class="ttc" id="structQFixed_html_af445ed678763d7781173db80622c4ed9"><div class="ttname"><a href="structQFixed.html#af445ed678763d7781173db80622c4ed9">QFixed::round</a></div><div class="ttdeci">QFixed round() const</div><div class="ttdef"><b>Definition:</b> <a href="qfixed__p_8h_source.html#l00080">qfixed_p.h:80</a></div></div>
<div class="ttc" id="qmacdefines__mac_8h_html_a3558682280c7331d128912d3edd21a61"><div class="ttname"><a href="qmacdefines__mac_8h.html#a3558682280c7331d128912d3edd21a61">OSStatus</a></div><div class="ttdeci">signed long OSStatus</div><div class="ttdef"><b>Definition:</b> <a href="qmacdefines__mac_8h_source.html#l00105">qmacdefines_mac.h:105</a></div></div>
<div class="ttc" id="structQFontEngineMacMulti_1_1ShaperItem_html_a1cdd8bfcbb2fdd70899c636d4152f244"><div class="ttname"><a href="structQFontEngineMacMulti_1_1ShaperItem.html#a1cdd8bfcbb2fdd70899c636d4152f244">QFontEngineMacMulti::ShaperItem::charAttributes</a></div><div class="ttdeci">const HB_CharAttributes * charAttributes</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac__p_8h_source.html#l00128">qfontengine_mac_p.h:128</a></div></div>
<div class="ttc" id="structQGlyphLayoutInfo_html_acf639f88f6c384aca73f8f8db20a2ab6"><div class="ttname"><a href="structQGlyphLayoutInfo.html#acf639f88f6c384aca73f8f8db20a2ab6">QGlyphLayoutInfo::shaperItem</a></div><div class="ttdeci">QFontEngineMacMulti::ShaperItem * shaperItem</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00217">qfontengine_mac.mm:217</a></div></div>
<div class="ttc" id="structQGlyphLayoutInfo_html_ac7b144bf26d9fd2fec9e9bfa6e211321"><div class="ttname"><a href="structQGlyphLayoutInfo.html#ac7b144bf26d9fd2fec9e9bfa6e211321">QGlyphLayoutInfo::flags</a></div><div class="ttdeci">QTextEngine::ShaperFlags flags</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00216">qfontengine_mac.mm:216</a></div></div>
<div class="ttc" id="structQGlyphLayoutInfo_html_a6931ea4ae620f7ff398a7d5cc4f5bcbe"><div class="ttname"><a href="structQGlyphLayoutInfo.html#a6931ea4ae620f7ff398a7d5cc4f5bcbe">QGlyphLayoutInfo::glyphs</a></div><div class="ttdeci">QGlyphLayout * glyphs</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00212">qfontengine_mac.mm:212</a></div></div>
<div class="ttc" id="structQFontEngineMacMulti_1_1ShaperItem_html_aa29ec51338da1073652f98a988a9153a"><div class="ttname"><a href="structQFontEngineMacMulti_1_1ShaperItem.html#aa29ec51338da1073652f98a988a9153a">QFontEngineMacMulti::ShaperItem::log_clusters</a></div><div class="ttdeci">unsigned short * log_clusters</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac__p_8h_source.html#l00127">qfontengine_mac_p.h:127</a></div></div>
<div class="ttc" id="structQFontEngineMacMulti_1_1ShaperItem_html_a57287f137c9a3660ca03eab3cf4517dc"><div class="ttname"><a href="structQFontEngineMacMulti_1_1ShaperItem.html#a57287f137c9a3660ca03eab3cf4517dc">QFontEngineMacMulti::ShaperItem::from</a></div><div class="ttdeci">int from</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac__p_8h_source.html#l00124">qfontengine_mac_p.h:124</a></div></div>
<div class="ttc" id="structQGlyphLayout_html_a148d1f735697788d627fa32801d73de4"><div class="ttname"><a href="structQGlyphLayout.html#a148d1f735697788d627fa32801d73de4">QGlyphLayout::attributes</a></div><div class="ttdeci">HB_GlyphAttributes * attributes</div><div class="ttdef"><b>Definition:</b> <a href="qtextengine__p_8h_source.html#l00176">qtextengine_p.h:176</a></div></div>
<div class="ttc" id="structQFontEngineMacMulti_1_1ShaperItem_html_a7669ded658bc53510f37a3c272d3aa0d"><div class="ttname"><a href="structQFontEngineMacMulti_1_1ShaperItem.html#a7669ded658bc53510f37a3c272d3aa0d">QFontEngineMacMulti::ShaperItem::length</a></div><div class="ttdeci">int length</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac__p_8h_source.html#l00125">qfontengine_mac_p.h:125</a></div></div>
<div class="ttc" id="qglobal_8h_html_ab50b9ec9f8efb4c169cbd1a13b1fe2b1"><div class="ttname"><a href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a></div><div class="ttdeci">#define Q_UNUSED(x)</div><div class="ttdoc">Indicates to the compiler that the parameter with the specified name is not used in the body of a fun...</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01729">qglobal.h:1729</a></div></div>
<div class="ttc" id="structQGlyphLayoutInfo_html_a0bc97e29359207b9116771051671e832"><div class="ttname"><a href="structQGlyphLayoutInfo.html#a0bc97e29359207b9116771051671e832">QGlyphLayoutInfo::numGlyphs</a></div><div class="ttdeci">int * numGlyphs</div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00213">qfontengine_mac.mm:213</a></div></div>
<div class="ttc" id="structQGlyphLayoutInfo_html"><div class="ttname"><a href="structQGlyphLayoutInfo.html">QGlyphLayoutInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="qfontengine__mac_8mm_source.html#l00210">qfontengine_mac.mm:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab23f5751b6e5cc3c0e3eeac14f6f3588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab23f5751b6e5cc3c0e3eeac14f6f3588">&#9670;&nbsp;</a></span>getChar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int getChar </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQChar.html">QChar</a> *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qfontengine__mac_8mm_source.html#l00735">735</a> of file <a class="el" href="qfontengine__mac_8mm_source.html">qfontengine_mac.mm</a>.</p>

<p class="reference">Referenced by <a class="el" href="qfontengine__mac_8mm_source.html#l00746">QFontEngineMac::stringToCMap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;{</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="qglobal_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ucs4 = str[i].<a class="code" href="classQChar.html#a0fd3d9a4b10d8f6482c5ebd8053b69a8">unicode</a>();</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">if</span> (str[i].isHighSurrogate() &amp;&amp; i &lt; len-1 &amp;&amp; str[i+1].isLowSurrogate()) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        ++i;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        ucs4 = <a class="code" href="classQChar.html#abfd8b3a9f743b78ff6c2798d6539ed85">QChar::surrogateToUcs4</a>(ucs4, str[i].unicode());</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">return</span> ucs4;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;}</div><div class="ttc" id="classQChar_html_a0fd3d9a4b10d8f6482c5ebd8053b69a8"><div class="ttname"><a href="classQChar.html#a0fd3d9a4b10d8f6482c5ebd8053b69a8">QChar::unicode</a></div><div class="ttdeci">ushort unicode() const</div><div class="ttdoc">This is an overloaded member function, provided for convenience. It differs from the above function o...</div><div class="ttdef"><b>Definition:</b> <a href="qchar_8h_source.html#l00251">qchar.h:251</a></div></div>
<div class="ttc" id="qglobal_8h_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="qglobal_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l00996">qglobal.h:996</a></div></div>
<div class="ttc" id="classQChar_html_abfd8b3a9f743b78ff6c2798d6539ed85"><div class="ttname"><a href="classQChar.html#abfd8b3a9f743b78ff6c2798d6539ed85">QChar::surrogateToUcs4</a></div><div class="ttdeci">static uint surrogateToUcs4(ushort high, ushort low)</div><div class="ttdoc">Converts a UTF16 surrogate pair with the given high and low values to its UCS-4 code point...</div><div class="ttdef"><b>Definition:</b> <a href="qchar_8h_source.html#l00297">qchar.h:297</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6b6afd731a7f3fa550444615f21892c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b6afd731a7f3fa550444615f21892c7">&#9670;&nbsp;</a></span>qt_antialiasing_threshold</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qt_antialiasing_threshold</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qapplication_8cpp_source.html#l00495">495</a> of file <a class="el" href="qapplication_8cpp_source.html">qapplication.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qfontengine__mac_8mm_source.html#l00929">QFontEngineMac::imageForGlyph()</a>.</p>

</div>
</div>
</div><!-- contents -->

<hr class="footer"/><address class="footer"><small><a href="https://dreamswork.github.io/qt4/">Qt 4.8 Source Code Browser</a></small></address>
</body>
</html>
