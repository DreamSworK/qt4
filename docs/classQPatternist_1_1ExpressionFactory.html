<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Qt 4.8: QPatternist::ExpressionFactory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="qt_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qt 4.8
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceQPatternist.html">QPatternist</a></li><li class="navelem"><a class="el" href="classQPatternist_1_1ExpressionFactory.html">ExpressionFactory</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Functions</a> &#124;
<a href="#pub-static-methods">Static Public Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Functions</a> &#124;
<a href="classQPatternist_1_1ExpressionFactory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">QPatternist::ExpressionFactory Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The central entry point for compiling expressions.
 <a href="classQPatternist_1_1ExpressionFactory.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="qexpressionfactory__p_8h_source.html">qexpressionfactory_p.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for QPatternist::ExpressionFactory:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classQPatternist_1_1ExpressionFactory.png" usemap="#QPatternist::ExpressionFactory_map" alt=""/>
  <map id="QPatternist::ExpressionFactory_map" name="QPatternist::ExpressionFactory_map">
<area href="classQSharedData.html" title="The QSharedData class is a base class for shared data objects. " alt="QSharedData" shape="rect" coords="0,0,186,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a4d95e9acd8eb283c11494b64a7040c26"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26">CompilationStage</a> { <br />
&#160;&#160;<a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1e24559a15fc656773654db5ad8210dc">QueryBodyInitial</a> = 1,
<a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a861d0ff545533fdf6ea0e0906ecfd0cb">QueryBodyTypeCheck</a> = 1 &lt;&lt; 1,
<a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ab44ba6cfe3274f09bd4220d7ab6325c6">QueryBodyCompression</a> = 1 &lt;&lt; 2,
<a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1c52d4d084296ccbe2b7c7963ec81065">UserFunctionTypeCheck</a> = 1 &lt;&lt; 3,
<br />
&#160;&#160;<a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a3de414b4070fa8110007dab8b0c58720">UserFunctionCompression</a> = 1 &lt;&lt; 4,
<a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ac47039c35f3a31d1607898cb7941284f">GlobalVariableTypeCheck</a> = 1 &lt;&lt; 5
<br />
 }</td></tr>
<tr class="separator:a4d95e9acd8eb283c11494b64a7040c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a7fbaa807d779036907123684614094"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classQExplicitlySharedDataPointer.html">QExplicitlySharedDataPointer</a>&lt; <a class="el" href="classQPatternist_1_1ExpressionFactory.html">ExpressionFactory</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a0a7fbaa807d779036907123684614094">Ptr</a></td></tr>
<tr class="separator:a0a7fbaa807d779036907123684614094"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Functions</h2></td></tr>
<tr class="memitem:a16b01d516847bc4815ebd89fd87265b2"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a16b01d516847bc4815ebd89fd87265b2">createExpression</a> (const <a class="el" href="classQString.html">QString</a> &amp;expr, const <a class="el" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a> &amp;context, const <a class="el" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69">QXmlQuery::QueryLanguage</a> lang, const <a class="el" href="classQPatternist_1_1SequenceType.html#aca567f13dbc96dce5f75c81a8aaa72f5">SequenceType::Ptr</a> &amp;requiredType, const <a class="el" href="classQUrl.html">QUrl</a> &amp;queryURI, const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;initialTemplateName)</td></tr>
<tr class="separator:a16b01d516847bc4815ebd89fd87265b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a376faccb286143fd4a7d69a370c9b6f4"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a376faccb286143fd4a7d69a370c9b6f4">createExpression</a> (<a class="el" href="classQIODevice.html">QIODevice</a> *const device, const <a class="el" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a> &amp;context, const <a class="el" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69">QXmlQuery::QueryLanguage</a> lang, const <a class="el" href="classQPatternist_1_1SequenceType.html#aca567f13dbc96dce5f75c81a8aaa72f5">SequenceType::Ptr</a> &amp;requiredType, const <a class="el" href="classQUrl.html">QUrl</a> &amp;queryURI, const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;initialTemplateName)</td></tr>
<tr class="separator:a376faccb286143fd4a7d69a370c9b6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2875e067229cbbc3cb95b4d282f8a752"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a2875e067229cbbc3cb95b4d282f8a752">ExpressionFactory</a> ()</td></tr>
<tr class="memdesc:a2875e067229cbbc3cb95b4d282f8a752"><td class="mdescLeft">&#160;</td><td class="mdescRight">This constructor cannot be synthesized since we use the Q_DISABLE_COPY macro.  <a href="#a2875e067229cbbc3cb95b4d282f8a752">More...</a><br /></td></tr>
<tr class="separator:a2875e067229cbbc3cb95b4d282f8a752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4743a69a6eea370592071f6b8e18563e"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4743a69a6eea370592071f6b8e18563e">~ExpressionFactory</a> ()</td></tr>
<tr class="separator:a4743a69a6eea370592071f6b8e18563e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classQSharedData"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classQSharedData')"><img src="closed.png" alt="-"/>&#160;Public Functions inherited from <a class="el" href="classQSharedData.html">QSharedData</a></td></tr>
<tr class="memitem:a4aa6818a0cf39972306c81ea8be18c12 inherit pub_methods_classQSharedData"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQSharedData.html#a4aa6818a0cf39972306c81ea8be18c12">QSharedData</a> ()</td></tr>
<tr class="memdesc:a4aa6818a0cf39972306c81ea8be18c12 inherit pub_methods_classQSharedData"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classQSharedData.html" title="The QSharedData class is a base class for shared data objects. ">QSharedData</a> object with a reference count of 0.  <a href="classQSharedData.html#a4aa6818a0cf39972306c81ea8be18c12">More...</a><br /></td></tr>
<tr class="separator:a4aa6818a0cf39972306c81ea8be18c12 inherit pub_methods_classQSharedData"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a689e6885d1bc75187dc609352a6179f9 inherit pub_methods_classQSharedData"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQSharedData.html#a689e6885d1bc75187dc609352a6179f9">QSharedData</a> (const <a class="el" href="classQSharedData.html">QSharedData</a> &amp;)</td></tr>
<tr class="memdesc:a689e6885d1bc75187dc609352a6179f9 inherit pub_methods_classQSharedData"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classQSharedData.html" title="The QSharedData class is a base class for shared data objects. ">QSharedData</a> object with reference count 0.  <a href="classQSharedData.html#a689e6885d1bc75187dc609352a6179f9">More...</a><br /></td></tr>
<tr class="separator:a689e6885d1bc75187dc609352a6179f9 inherit pub_methods_classQSharedData"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Functions</h2></td></tr>
<tr class="memitem:a39c0cf2e2ad8560d583a01412b3195f2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a39c0cf2e2ad8560d583a01412b3195f2">registerLastPath</a> (const <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> &amp;operand)</td></tr>
<tr class="separator:a39c0cf2e2ad8560d583a01412b3195f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a9c701185420c968e2b68ca67b3a6e2e7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7">TemplateCompilationStage</a> { <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a643ce119a3efb378008e83a3d51db664">TemplateInitial</a> = 1,
<a class="el" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a7c1a51e2a40057710cfa1c8198879528">TemplateTypeCheck</a> = 1 &lt;&lt; 1,
<a class="el" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a49bf9201d144a5d429f4fcd5fa80902a">TemplateCompress</a> = 1 &lt;&lt; 2
 }</td></tr>
<tr class="separator:a9c701185420c968e2b68ca67b3a6e2e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Functions</h2></td></tr>
<tr class="memitem:ab183b03dca5c11e7defb23b4066f22e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#ab183b03dca5c11e7defb23b4066f22e1">createExpression</a> (const <a class="el" href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">Tokenizer::Ptr</a> &amp;tokenizer, const <a class="el" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a> &amp;context, const <a class="el" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69">QXmlQuery::QueryLanguage</a> lang, const <a class="el" href="classQPatternist_1_1SequenceType.html#aca567f13dbc96dce5f75c81a8aaa72f5">SequenceType::Ptr</a> &amp;requiredType, const <a class="el" href="classQUrl.html">QUrl</a> &amp;queryURI, const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;initialTemplateName)</td></tr>
<tr class="separator:ab183b03dca5c11e7defb23b4066f22e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49d6f16161868d3fb43efdcd3b39291b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a49d6f16161868d3fb43efdcd3b39291b">processNamedTemplate</a> (const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;<a class="el" href="qkeysequence_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> &amp;tree, const <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7">TemplateCompilationStage</a> stage)</td></tr>
<tr class="separator:a49d6f16161868d3fb43efdcd3b39291b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82abcb44a9502e60c77fb5c0004a3116"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a82abcb44a9502e60c77fb5c0004a3116">processTemplateRule</a> (const <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> &amp;body, const <a class="el" href="classQPatternist_1_1TemplatePattern.html#ab809786d424395fb258b5f5bab6c594f">TemplatePattern::Ptr</a> &amp;pattern, const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;mode, const <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7">TemplateCompilationStage</a> stage)</td></tr>
<tr class="separator:a82abcb44a9502e60c77fb5c0004a3116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad60eb598b2505185953a9c637a8baf"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1ExpressionFactory.html#a8ad60eb598b2505185953a9c637a8baf">processTreePass</a> (const <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> &amp;tree, const <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26">CompilationStage</a> stage)</td></tr>
<tr class="separator:a8ad60eb598b2505185953a9c637a8baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_classQSharedData"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classQSharedData')"><img src="closed.png" alt="-"/>&#160;Public Variables inherited from <a class="el" href="classQSharedData.html">QSharedData</a></td></tr>
<tr class="memitem:a7b1cd8d1d2471c72a95f86134cae94a6 inherit pub_attribs_classQSharedData"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQAtomicInt.html">QAtomicInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQSharedData.html#a7b1cd8d1d2471c72a95f86134cae94a6">ref</a></td></tr>
<tr class="separator:a7b1cd8d1d2471c72a95f86134cae94a6 inherit pub_attribs_classQSharedData"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The central entry point for compiling expressions. </p>
<dl class="section author"><dt>Author</dt><dd>Frans Englich <a href="#" onclick="location.href='mai'+'lto:'+'fra'+'ns'+'.en'+'gl'+'ich'+'@n'+'oki'+'a.'+'com'; return false;">frans<span style="display: none;">.nosp@m.</span>.eng<span style="display: none;">.nosp@m.</span>lich@<span style="display: none;">.nosp@m.</span>noki<span style="display: none;">.nosp@m.</span>a.com</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="qexpressionfactory__p_8h_source.html#l00077">77</a> of file <a class="el" href="qexpressionfactory__p_8h_source.html">qexpressionfactory_p.h</a>.</p>
</div><h2 class="groupheader">Typedefs</h2>
<a id="a0a7fbaa807d779036907123684614094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a7fbaa807d779036907123684614094">&#9670;&nbsp;</a></span>Ptr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classQExplicitlySharedDataPointer.html">QExplicitlySharedDataPointer</a>&lt;<a class="el" href="classQPatternist_1_1ExpressionFactory.html">ExpressionFactory</a>&gt; <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a0a7fbaa807d779036907123684614094">QPatternist::ExpressionFactory::Ptr</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qexpressionfactory__p_8h_source.html#l00080">80</a> of file <a class="el" href="qexpressionfactory__p_8h_source.html">qexpressionfactory_p.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumerations</h2>
<a id="a4d95e9acd8eb283c11494b64a7040c26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d95e9acd8eb283c11494b64a7040c26">&#9670;&nbsp;</a></span>CompilationStage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26">QPatternist::ExpressionFactory::CompilationStage</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a4d95e9acd8eb283c11494b64a7040c26a1e24559a15fc656773654db5ad8210dc"></a>QueryBodyInitial&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4d95e9acd8eb283c11494b64a7040c26a861d0ff545533fdf6ea0e0906ecfd0cb"></a>QueryBodyTypeCheck&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4d95e9acd8eb283c11494b64a7040c26ab44ba6cfe3274f09bd4220d7ab6325c6"></a>QueryBodyCompression&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4d95e9acd8eb283c11494b64a7040c26a1c52d4d084296ccbe2b7c7963ec81065"></a>UserFunctionTypeCheck&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4d95e9acd8eb283c11494b64a7040c26a3de414b4070fa8110007dab8b0c58720"></a>UserFunctionCompression&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4d95e9acd8eb283c11494b64a7040c26ac47039c35f3a31d1607898cb7941284f"></a>GlobalVariableTypeCheck&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="qexpressionfactory__p_8h_source.html#l00094">94</a> of file <a class="el" href="qexpressionfactory__p_8h_source.html">qexpressionfactory_p.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1e24559a15fc656773654db5ad8210dc">QueryBodyInitial</a>        = 1,</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a861d0ff545533fdf6ea0e0906ecfd0cb">QueryBodyTypeCheck</a>      = 1 &lt;&lt; 1,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ab44ba6cfe3274f09bd4220d7ab6325c6">QueryBodyCompression</a>    = 1 &lt;&lt; 2,</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1c52d4d084296ccbe2b7c7963ec81065">UserFunctionTypeCheck</a>   = 1 &lt;&lt; 3,</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a3de414b4070fa8110007dab8b0c58720">UserFunctionCompression</a> = 1 &lt;&lt; 4,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ac47039c35f3a31d1607898cb7941284f">GlobalVariableTypeCheck</a> = 1 &lt;&lt; 5</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        };</div><div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26a1e24559a15fc656773654db5ad8210dc"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1e24559a15fc656773654db5ad8210dc">QPatternist::ExpressionFactory::QueryBodyInitial</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00096">qexpressionfactory_p.h:96</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26a861d0ff545533fdf6ea0e0906ecfd0cb"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a861d0ff545533fdf6ea0e0906ecfd0cb">QPatternist::ExpressionFactory::QueryBodyTypeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00097">qexpressionfactory_p.h:97</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26ab44ba6cfe3274f09bd4220d7ab6325c6"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ab44ba6cfe3274f09bd4220d7ab6325c6">QPatternist::ExpressionFactory::QueryBodyCompression</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00098">qexpressionfactory_p.h:98</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26a3de414b4070fa8110007dab8b0c58720"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a3de414b4070fa8110007dab8b0c58720">QPatternist::ExpressionFactory::UserFunctionCompression</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00100">qexpressionfactory_p.h:100</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26a1c52d4d084296ccbe2b7c7963ec81065"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1c52d4d084296ccbe2b7c7963ec81065">QPatternist::ExpressionFactory::UserFunctionTypeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00099">qexpressionfactory_p.h:99</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26ac47039c35f3a31d1607898cb7941284f"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ac47039c35f3a31d1607898cb7941284f">QPatternist::ExpressionFactory::GlobalVariableTypeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00101">qexpressionfactory_p.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c701185420c968e2b68ca67b3a6e2e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c701185420c968e2b68ca67b3a6e2e7">&#9670;&nbsp;</a></span>TemplateCompilationStage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7">QPatternist::ExpressionFactory::TemplateCompilationStage</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a9c701185420c968e2b68ca67b3a6e2e7a643ce119a3efb378008e83a3d51db664"></a>TemplateInitial&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c701185420c968e2b68ca67b3a6e2e7a7c1a51e2a40057710cfa1c8198879528"></a>TemplateTypeCheck&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9c701185420c968e2b68ca67b3a6e2e7a49bf9201d144a5d429f4fcd5fa80902a"></a>TemplateCompress&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="qexpressionfactory__p_8h_source.html#l00142">142</a> of file <a class="el" href="qexpressionfactory__p_8h_source.html">qexpressionfactory_p.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a643ce119a3efb378008e83a3d51db664">TemplateInitial</a>         = 1,</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a7c1a51e2a40057710cfa1c8198879528">TemplateTypeCheck</a>       = 1 &lt;&lt; 1,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a49bf9201d144a5d429f4fcd5fa80902a">TemplateCompress</a>        = 1 &lt;&lt; 2</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        };</div><div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a9c701185420c968e2b68ca67b3a6e2e7a49bf9201d144a5d429f4fcd5fa80902a"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a49bf9201d144a5d429f4fcd5fa80902a">QPatternist::ExpressionFactory::TemplateCompress</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00146">qexpressionfactory_p.h:146</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a9c701185420c968e2b68ca67b3a6e2e7a643ce119a3efb378008e83a3d51db664"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a643ce119a3efb378008e83a3d51db664">QPatternist::ExpressionFactory::TemplateInitial</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00144">qexpressionfactory_p.h:144</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a9c701185420c968e2b68ca67b3a6e2e7a7c1a51e2a40057710cfa1c8198879528"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a7c1a51e2a40057710cfa1c8198879528">QPatternist::ExpressionFactory::TemplateTypeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00145">qexpressionfactory_p.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructors and Destructors</h2>
<a id="a2875e067229cbbc3cb95b4d282f8a752"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2875e067229cbbc3cb95b4d282f8a752">&#9670;&nbsp;</a></span>ExpressionFactory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QPatternist::ExpressionFactory::ExpressionFactory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This constructor cannot be synthesized since we use the Q_DISABLE_COPY macro. </p>

<p class="definition">Definition at line <a class="el" href="qexpressionfactory__p_8h_source.html#l00086">86</a> of file <a class="el" href="qexpressionfactory__p_8h_source.html">qexpressionfactory_p.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div></div><!-- fragment -->
</div>
</div>
<a id="a4743a69a6eea370592071f6b8e18563e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4743a69a6eea370592071f6b8e18563e">&#9670;&nbsp;</a></span>~ExpressionFactory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual QPatternist::ExpressionFactory::~ExpressionFactory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qexpressionfactory__p_8h_source.html#l00090">90</a> of file <a class="el" href="qexpressionfactory__p_8h_source.html">qexpressionfactory_p.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Functions</h2>
<a id="a16b01d516847bc4815ebd89fd87265b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b01d516847bc4815ebd89fd87265b2">&#9670;&nbsp;</a></span>createExpression() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> QPatternist::ExpressionFactory::createExpression </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQString.html">QString</a> &amp;&#160;</td>
          <td class="paramname"><em>expr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69">QXmlQuery::QueryLanguage</a>&#160;</td>
          <td class="paramname"><em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1SequenceType.html#aca567f13dbc96dce5f75c81a8aaa72f5">SequenceType::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>requiredType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQUrl.html">QUrl</a> &amp;&#160;</td>
          <td class="paramname"><em>queryURI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;&#160;</td>
          <td class="paramname"><em>initialTemplateName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a compiled representation of the XPath expression <code>expr</code>, with Static Context information supplied via <code>context</code>. This is for example whether the expression is an XPath 1.0 or XPath 2.0 expression, or what functions that are available.</p>
<p><code>requiredType</code> specifies what type results of the evaluating the expression must match. Passing CommonValues::ZeroOrMoreItems allows anything as result, while passing <a class="el" href="classQPatternist_1_1CommonSequenceTypes.html#a3dd23549524131687b130aa5c36bb469">CommonSequenceTypes::EBV</a> means anything but an Effective Boolean Value extractable result is a type error, for example.</p>
<dl class="section note"><dt>Note</dt><dd>An empty <code>expr</code> is an invalid XPath expression. It will be reported as such, but it is neverthless the caller's resonsibility to ensure that it's not that(since it is likely invalid already in the medium it was stored). </dd></dl>

<p class="definition">Definition at line <a class="el" href="qexpressionfactory_8cpp_source.html#l00077">77</a> of file <a class="el" href="qexpressionfactory_8cpp_source.html">qexpressionfactory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span>(lang == <a class="code" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146">QXmlQuery::XSLT20</a>)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="classQByteArray.html">QByteArray</a> query(expr.<a class="code" href="classQString.html#abfcbb02434abf1a7fcccf13f090bd5a2">toUtf8</a>());</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="classQBuffer.html">QBuffer</a> buffer(&amp;query);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        buffer.open(<a class="code" href="classQIODevice.html#af4c3367f5f33e4ae6d653d49e9f88d53ab4e75acb9a81ddb2548ee2fd01e232b9">QIODevice::ReadOnly</a>);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a16b01d516847bc4815ebd89fd87265b2">createExpression</a>(&amp;buffer,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                context,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                lang,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                                requiredType,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                queryURI,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                initialTemplateName);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a16b01d516847bc4815ebd89fd87265b2">createExpression</a>(<a class="code" href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">Tokenizer::Ptr</a>(<span class="keyword">new</span> XQueryTokenizer(expr, queryURI)),</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                                context,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                                lang,</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                                requiredType,</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                queryURI,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                initialTemplateName);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div><div class="ttc" id="classQIODevice_html_af4c3367f5f33e4ae6d653d49e9f88d53ab4e75acb9a81ddb2548ee2fd01e232b9"><div class="ttname"><a href="classQIODevice.html#af4c3367f5f33e4ae6d653d49e9f88d53ab4e75acb9a81ddb2548ee2fd01e232b9">QIODevice::ReadOnly</a></div><div class="ttdef"><b>Definition:</b> <a href="qiodevice_8h_source.html#l00077">qiodevice.h:77</a></div></div>
<div class="ttc" id="classQXmlQuery_html_aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146"><div class="ttname"><a href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146">QXmlQuery::XSLT20</a></div><div class="ttdef"><b>Definition:</b> <a href="qxmlquery_8h_source.html#l00085">qxmlquery.h:85</a></div></div>
<div class="ttc" id="classQString_html_abfcbb02434abf1a7fcccf13f090bd5a2"><div class="ttname"><a href="classQString.html#abfcbb02434abf1a7fcccf13f090bd5a2">QString::toUtf8</a></div><div class="ttdeci">QByteArray toUtf8() const Q_REQUIRED_RESULT</div><div class="ttdoc">Returns a UTF-8 representation of the string as a QByteArray. </div><div class="ttdef"><b>Definition:</b> <a href="qstring_8cpp_source.html#l04074">qstring.cpp:4074</a></div></div>
<div class="ttc" id="classQByteArray_html"><div class="ttname"><a href="classQByteArray.html">QByteArray</a></div><div class="ttdoc">The QByteArray class provides an array of bytes. </div><div class="ttdef"><b>Definition:</b> <a href="qbytearray_8h_source.html#l00135">qbytearray.h:135</a></div></div>
<div class="ttc" id="classQBuffer_html"><div class="ttname"><a href="classQBuffer.html">QBuffer</a></div><div class="ttdoc">The QBuffer class provides a QIODevice interface for a QByteArray. </div><div class="ttdef"><b>Definition:</b> <a href="qbuffer_8h_source.html#l00057">qbuffer.h:57</a></div></div>
<div class="ttc" id="classQPatternist_1_1Tokenizer_html_aaca3177fce5959fb47b305e71a0f20b0"><div class="ttname"><a href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">QPatternist::Tokenizer::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; Tokenizer &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qtokenizer__p_8h_source.html#l00163">qtokenizer_p.h:163</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a16b01d516847bc4815ebd89fd87265b2"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a16b01d516847bc4815ebd89fd87265b2">QPatternist::ExpressionFactory::createExpression</a></div><div class="ttdeci">virtual Expression::Ptr createExpression(const QString &amp;expr, const StaticContext::Ptr &amp;context, const QXmlQuery::QueryLanguage lang, const SequenceType::Ptr &amp;requiredType, const QUrl &amp;queryURI, const QXmlName &amp;initialTemplateName)</div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory_8cpp_source.html#l00077">qexpressionfactory.cpp:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a376faccb286143fd4a7d69a370c9b6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a376faccb286143fd4a7d69a370c9b6f4">&#9670;&nbsp;</a></span>createExpression() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> QPatternist::ExpressionFactory::createExpression </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classQIODevice.html">QIODevice</a> *const&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69">QXmlQuery::QueryLanguage</a>&#160;</td>
          <td class="paramname"><em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1SequenceType.html#aca567f13dbc96dce5f75c81a8aaa72f5">SequenceType::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>requiredType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQUrl.html">QUrl</a> &amp;&#160;</td>
          <td class="paramname"><em>queryURI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;&#160;</td>
          <td class="paramname"><em>initialTemplateName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qexpressionfactory_8cpp_source.html#l00108">108</a> of file <a class="el" href="qexpressionfactory_8cpp_source.html">qexpressionfactory.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qexpressionfactory_8cpp_source.html#l00108">createExpression()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(device);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(device-&gt;<a class="code" href="classQIODevice.html#a3bba4665b92eabfeca6905e7561cc943">isReadable</a>());</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">Tokenizer::Ptr</a> tokenizer;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span>(lang == <a class="code" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146">QXmlQuery::XSLT20</a>)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        tokenizer = <a class="code" href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">Tokenizer::Ptr</a>(<span class="keyword">new</span> XSLTTokenizer(device, queryURI, context, context-&gt;namePool()));</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        tokenizer = <a class="code" href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">Tokenizer::Ptr</a>(<span class="keyword">new</span> XQueryTokenizer(<a class="code" href="classQString.html#ad7f4d0a383890ee85bcbfe7b2b7c7b4c">QString::fromUtf8</a>(device-&gt;<a class="code" href="classQIODevice.html#a2b93df374c6eea09c68a95cf99d66e6f">readAll</a>()), queryURI));</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a16b01d516847bc4815ebd89fd87265b2">createExpression</a>(tokenizer, context, lang, requiredType, queryURI, initialTemplateName);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div><div class="ttc" id="classQIODevice_html_a3bba4665b92eabfeca6905e7561cc943"><div class="ttname"><a href="classQIODevice.html#a3bba4665b92eabfeca6905e7561cc943">QIODevice::isReadable</a></div><div class="ttdeci">bool isReadable() const</div><div class="ttdoc">Returns true if data can be read from the device; otherwise returns false. </div><div class="ttdef"><b>Definition:</b> <a href="qiodevice_8cpp_source.html#l00544">qiodevice.cpp:544</a></div></div>
<div class="ttc" id="classQXmlQuery_html_aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146"><div class="ttname"><a href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146">QXmlQuery::XSLT20</a></div><div class="ttdef"><b>Definition:</b> <a href="qxmlquery_8h_source.html#l00085">qxmlquery.h:85</a></div></div>
<div class="ttc" id="qglobal_8h_html_ac29a7ecc02f777dfeb2b68a051561c35"><div class="ttname"><a href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a></div><div class="ttdeci">#define Q_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01823">qglobal.h:1823</a></div></div>
<div class="ttc" id="classQString_html_ad7f4d0a383890ee85bcbfe7b2b7c7b4c"><div class="ttname"><a href="classQString.html#ad7f4d0a383890ee85bcbfe7b2b7c7b4c">QString::fromUtf8</a></div><div class="ttdeci">static QString fromUtf8(const char *, int size=-1)</div><div class="ttdoc">Returns a QString initialized with the first size bytes of the UTF-8 string str. </div><div class="ttdef"><b>Definition:</b> <a href="qstring_8cpp_source.html#l04302">qstring.cpp:4302</a></div></div>
<div class="ttc" id="classQIODevice_html_a2b93df374c6eea09c68a95cf99d66e6f"><div class="ttname"><a href="classQIODevice.html#a2b93df374c6eea09c68a95cf99d66e6f">QIODevice::readAll</a></div><div class="ttdeci">QByteArray readAll()</div><div class="ttdoc">Reads all available data from the device, and returns it as a QByteArray. </div><div class="ttdef"><b>Definition:</b> <a href="qiodevice_8cpp_source.html#l01025">qiodevice.cpp:1025</a></div></div>
<div class="ttc" id="classQPatternist_1_1Tokenizer_html_aaca3177fce5959fb47b305e71a0f20b0"><div class="ttname"><a href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">QPatternist::Tokenizer::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; Tokenizer &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qtokenizer__p_8h_source.html#l00163">qtokenizer_p.h:163</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a16b01d516847bc4815ebd89fd87265b2"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a16b01d516847bc4815ebd89fd87265b2">QPatternist::ExpressionFactory::createExpression</a></div><div class="ttdeci">virtual Expression::Ptr createExpression(const QString &amp;expr, const StaticContext::Ptr &amp;context, const QXmlQuery::QueryLanguage lang, const SequenceType::Ptr &amp;requiredType, const QUrl &amp;queryURI, const QXmlName &amp;initialTemplateName)</div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory_8cpp_source.html#l00077">qexpressionfactory.cpp:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab183b03dca5c11e7defb23b4066f22e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab183b03dca5c11e7defb23b4066f22e1">&#9670;&nbsp;</a></span>createExpression() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> QPatternist::ExpressionFactory::createExpression </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">Tokenizer::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>tokenizer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69">QXmlQuery::QueryLanguage</a>&#160;</td>
          <td class="paramname"><em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1SequenceType.html#aca567f13dbc96dce5f75c81a8aaa72f5">SequenceType::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>requiredType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQUrl.html">QUrl</a> &amp;&#160;</td>
          <td class="paramname"><em>queryURI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;&#160;</td>
          <td class="paramname"><em>initialTemplateName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qexpressionfactory_8cpp_source.html#l00128">128</a> of file <a class="el" href="qexpressionfactory_8cpp_source.html">qexpressionfactory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(context);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(requiredType);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(queryURI.<a class="code" href="classQUrl.html#a6a1c0794c8796e3dead0dc5110b62f87">isValid</a>());</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">Tokenizer::Ptr</a> effectiveTokenizer(tokenizer);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#ifdef Patternist_DEBUG</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    effectiveTokenizer = <a class="code" href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">Tokenizer::Ptr</a>(<span class="keyword">new</span> TokenRevealer(queryURI, tokenizer));</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="classQPatternist_1_1OptimizationPasses_1_1Coordinator.html#a54a1ba54045a29b42c254c227c77f49d">OptimizationPasses::Coordinator::init</a>();</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1ParserContext.html#a54d987cfee85f8a38017ed221aeecfbc">ParserContext::Ptr</a> <a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>(<span class="keyword">new</span> ParserContext(context, lang, effectiveTokenizer.data()));</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;initialTemplateName = initialTemplateName;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    effectiveTokenizer-&gt;setParserContext(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> bisonRetval = <a class="code" href="namespaceQPatternist.html#ae3544b7e7783c91c557050a7e8ed49c9">XPathparse</a>(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>.data());</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="qglobal_8h.html#a2c9a16e97bc3d9f0322dc570a48c8514">Q_ASSERT_X</a>(bisonRetval == 0, <a class="code" href="qglobal_8h.html#ab027650838b4bee7b6d3d4edb3ceb463">Q_FUNC_INFO</a>,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;               <span class="stringliteral">&quot;We shouldn&#39;t be able to get an error, because we throw exceptions.&quot;</span>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(bisonRetval); <span class="comment">/* Needed when not compiled in debug mode, since bisonRetval won&#39;t</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">                            * be used in the Q_ASSERT_X above. */</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> result(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;queryBody);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">if</span>(!result)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        context-&gt;error(QtXmlPatterns::tr(<span class="stringliteral">&quot;A library module cannot be evaluated &quot;</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                         <span class="stringliteral">&quot;directly. It must be imported from a &quot;</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                         <span class="stringliteral">&quot;main module.&quot;</span>),</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                       <a class="code" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244af75ef82c3e30e43485c6c4d182ed1b4a">ReportContext::XPST0003</a>,</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                       <a class="code" href="classQSourceLocation.html">QSourceLocation</a>(queryURI, 1, 1));</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">/* Optimization: I think many things are done in the wrong order below. We</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">     * probably want everything typechecked before compressing, since we can</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">     * have references all over the place(variable references, template</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">     * invocations, function callsites). This could even be a source to bugs.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">/* Here, we type check user declared functions and global variables. This</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">     * means that variables and functions that are not used are type</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">     * checked(which they otherwise wouldn&#39;t have been), and those which are</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">     * used, are type-checked twice, unfortunately. */</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> hasExternalFocus = context-&gt;contextItemType();</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span>(lang == <a class="code" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146">QXmlQuery::XSLT20</a>)</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">/* Bind xsl:call-template instructions to their template bodies.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">         *</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">         * We do this before type checking and compressing them, because a</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">         * CallTemplate obviously needs its template before being compressed.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">         *</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">         * Also, we do this before type checking and compressing user</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">         * functions, since they can contain template call sites.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;templateCalls.count(); ++i)</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            CallTemplate *<span class="keyword">const</span> site = <a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;templateCalls.at(i)-&gt;as&lt;CallTemplate&gt;();</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keyword">const</span> <a class="code" href="classQXmlName.html">QXmlName</a> targetName(site-&gt;name());</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1Template.html#a73e8d0fc09f525e8e0c5148d751a6f6e">Template::Ptr</a> t(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;namedTemplates.value(targetName));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">if</span>(t)</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                site-&gt;setTemplate(t);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                context-&gt;error(QtXmlPatterns::tr(<span class="stringliteral">&quot;No template by name %1 exists.&quot;</span>).arg(<a class="code" href="namespaceQPatternist.html#af1feb7b659b34bf54de32a451ebe3bcc">formatKeyword</a>(context-&gt;namePool(), targetName)),</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                               <a class="code" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244a7d6d7ebf605ac098a78ccc515b89026c">ReportContext::XTSE0650</a>,</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                               site);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">/* Type check and compress user functions. */</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keyword">const</span> <a class="code" href="classQList.html#ac220ce1c155db1ac44146c12d178056f">UserFunction::List::const_iterator</a> <a class="code" href="qt__cocoa__helpers__mac_8mm.html#a875104226bb2d18c4bead75b19e75065">end</a>(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;userFunctions.constEnd());</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="classQList.html#ac220ce1c155db1ac44146c12d178056f">UserFunction::List::const_iterator</a> <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;userFunctions.constBegin());</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="comment">/* If the query has a focus(which is common, in the case of a</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">         * stylesheet), we must ensure that the focus isn&#39;t visible in the</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">         * function body. */</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a> effectiveContext;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">if</span>(hasExternalFocus)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            effectiveContext = <a class="code" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a>(<span class="keyword">new</span> StaticFocusContext(<a class="code" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a>(),</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                                                         context));</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            effectiveContext = context;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">for</span>(; <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a> != <a class="code" href="qt__cocoa__helpers__mac_8mm.html#a875104226bb2d18c4bead75b19e75065">end</a>; ++<a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>)</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;-----      User Function Typecheck      -----&quot;</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a39c0cf2e2ad8560d583a01412b3195f2">registerLastPath</a>((*it)-&gt;body());</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="comment">/* We will most likely call body()-&gt;typeCheck() again, once for</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">             * each callsite. That is, it will be called from</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">             * UserFunctionCallsite::typeCheck(), which will be called</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">             * indirectly when we check the query body. */</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> typeCheck((*it)-&gt;body()-&gt;typeCheck(effectiveContext,</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                                                     (*it)-&gt;signature()-&gt;returnType()));</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="comment">/* We don&#39;t have to call (*it)-&gt;setBody(typeCheck) here since it&#39;s</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">             * only used directly below. */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a8ad60eb598b2505185953a9c637a8baf">processTreePass</a>(typeCheck, <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1c52d4d084296ccbe2b7c7963ec81065">UserFunctionTypeCheck</a>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;------------------------------&quot;</span>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;-----      User Function Compress      -----&quot;</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> comp(typeCheck-&gt;compress(effectiveContext));</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            (*it)-&gt;setBody(comp);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a8ad60eb598b2505185953a9c637a8baf">processTreePass</a>(comp, <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a3de414b4070fa8110007dab8b0c58720">UserFunctionCompression</a>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;------------------------------&quot;</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">/* Type check and compress global variables. */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keyword">const</span> <a class="code" href="classQVector.html#a01e19bfad7fefd3e97ef197f4ed2cceb">VariableDeclaration::Stack::const_iterator</a> vend(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;variables.constEnd());</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="classQVector.html#a01e19bfad7fefd3e97ef197f4ed2cceb">VariableDeclaration::Stack::const_iterator</a> vit(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;variables.constBegin());</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">for</span>(; vit != vend; ++vit)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(*vit);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="comment">/* This is a bit murky, the global variable will have it</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">             * Expression::typeCheck() function called from all its references,</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">             * but we also want to check it here globally, so we do</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">             * typechecking using a proper focus. */</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">if</span>((*vit)-&gt;type == <a class="code" href="classQPatternist_1_1VariableDeclaration.html#a21bea9155483c72e9f3544a012a13bffa9c17e69988664cb7e1e97be410e44225">VariableDeclaration::ExternalVariable</a>)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;-----      Global Variable Typecheck      -----&quot;</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>((*vit)-&gt;expression());</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment">/* We supply ZeroOrMoreItems, meaning the variable can evaluate to anything. */</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="comment">// FIXME which is a source to bugs</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="comment">// TODO What about compressing variables?</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            nev((*vit)-&gt;expression()-&gt;typeCheck(context, <a class="code" href="classQPatternist_1_1CommonSequenceTypes.html#a1764ed5dbb1df01118ea5a4b08c98650">CommonSequenceTypes::ZeroOrMoreItems</a>));</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a8ad60eb598b2505185953a9c637a8baf">processTreePass</a>(nev, <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ac47039c35f3a31d1607898cb7941284f">GlobalVariableTypeCheck</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;------------------------------&quot;</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">/* Do all tests specific to XSL-T. */</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span>(lang == <a class="code" href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146">QXmlQuery::XSLT20</a>)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="comment">/* Type check and compress named templates. */</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Have &quot;</span> &lt;&lt; <a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;namedTemplates.count() &lt;&lt; <span class="stringliteral">&quot;named templates&quot;</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            QMutableHashIterator&lt;QXmlName, Template::Ptr&gt; <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;namedTemplates);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">while</span>(<a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.hasNext())</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.next();</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a49d6f16161868d3fb43efdcd3b39291b">processNamedTemplate</a>(<a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.key(), <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value()-&gt;body, <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a643ce119a3efb378008e83a3d51db664">TemplateInitial</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value()-&gt;body = <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value()-&gt;body-&gt;typeCheck(context, <a class="code" href="classQPatternist_1_1CommonSequenceTypes.html#a1764ed5dbb1df01118ea5a4b08c98650">CommonSequenceTypes::ZeroOrMoreItems</a>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a49d6f16161868d3fb43efdcd3b39291b">processNamedTemplate</a>(<a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.key(), <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value()-&gt;body, <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a7c1a51e2a40057710cfa1c8198879528">TemplateTypeCheck</a>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value()-&gt;body = <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value()-&gt;body-&gt;compress(context);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a49d6f16161868d3fb43efdcd3b39291b">processNamedTemplate</a>(<a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.key(), <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value()-&gt;body, <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a49bf9201d144a5d429f4fcd5fa80902a">TemplateCompress</a>);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value()-&gt;compileParameters(context);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="comment">/* Type check and compress template rules. */</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            QHashIterator&lt;QXmlName, TemplateMode::Ptr&gt; <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;templateRules);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="comment">/* Since a pattern can exist of AxisStep, its typeCheck() stage</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">             * requires a focus. In the case that we&#39;re invoked with a name but</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">             * no focus, this will yield a compile error, unless we declare a</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">             * focus manually. This only needs to be done for the pattern</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">             * expression, since the static type of the pattern is used as the</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">             * static type for the focus of the template body. */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <a class="code" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a> patternContext;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">if</span>(hasExternalFocus)</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                patternContext = context;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                patternContext = <a class="code" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a>(<span class="keyword">new</span> StaticFocusContext(<a class="code" href="classQPatternist_1_1BuiltinTypes.html#aaf823c6fe47bd96883c254425418dab0">BuiltinTypes::node</a>, context));</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="comment">/* For each template pattern. */</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keywordflow">while</span>(<a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.hasNext())</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.next();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1TemplateMode.html#a7dc315ba2b1045150b15190b3aa381c0">TemplateMode::Ptr</a> &amp;mode = <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value();</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> len = mode-&gt;templatePatterns.count();</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <a class="code" href="classQPatternist_1_1TemplatePattern.html#a830546833485b3b030b18536209d09ed">TemplatePattern::ID</a> currentTemplateID = -1;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <span class="keywordtype">bool</span> hasDoneItOnce = <span class="keyword">false</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="comment">/* For each template pattern. */</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; len; ++i)</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    <span class="comment">/* We can&#39;t use references for these two members, since we</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">                     * assign to them. */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1TemplatePattern.html#ab809786d424395fb258b5f5bab6c594f">TemplatePattern::Ptr</a> &amp;pattern = mode-&gt;templatePatterns.at(i);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                    <a class="code" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> matchPattern(pattern-&gt;matchPattern());</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a82abcb44a9502e60c77fb5c0004a3116">processTemplateRule</a>(pattern-&gt;templateTarget()-&gt;body,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                        pattern, mode-&gt;name(), <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a643ce119a3efb378008e83a3d51db664">TemplateInitial</a>);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    matchPattern = matchPattern-&gt;typeCheck(patternContext, <a class="code" href="classQPatternist_1_1CommonSequenceTypes.html#a1764ed5dbb1df01118ea5a4b08c98650">CommonSequenceTypes::ZeroOrMoreItems</a>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    matchPattern = matchPattern-&gt;compress(patternContext);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    pattern-&gt;setMatchPattern(matchPattern);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    <span class="keywordflow">if</span>(currentTemplateID == -1 &amp;&amp; hasDoneItOnce)</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                        currentTemplateID = pattern-&gt;id();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                    }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(currentTemplateID == pattern-&gt;id() &amp;&amp; hasDoneItOnce)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                    {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                        hasDoneItOnce = <span class="keyword">false</span>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    hasDoneItOnce = <span class="keyword">true</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    currentTemplateID = pattern-&gt;id();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                    <a class="code" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> body(pattern-&gt;templateTarget()-&gt;body);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    <span class="comment">/* Patterns for a new template has started, we must</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">                     * deal with the body &amp; parameters. */</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                        <span class="comment">/* TODO type is wrong, it has to be the union of all</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">                         * patterns. */</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">StaticContext::Ptr</a> focusContext(<span class="keyword">new</span> StaticFocusContext(matchPattern-&gt;staticType()-&gt;itemType(),</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                                                                     context));</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        body = body-&gt;typeCheck(focusContext, <a class="code" href="classQPatternist_1_1CommonSequenceTypes.html#a1764ed5dbb1df01118ea5a4b08c98650">CommonSequenceTypes::ZeroOrMoreItems</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                        pattern-&gt;templateTarget()-&gt;compileParameters(focusContext);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a82abcb44a9502e60c77fb5c0004a3116">processTemplateRule</a>(body, pattern, mode-&gt;name(), <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a7c1a51e2a40057710cfa1c8198879528">TemplateTypeCheck</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    body = body-&gt;compress(context);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    pattern-&gt;templateTarget()-&gt;body = body;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a82abcb44a9502e60c77fb5c0004a3116">processTemplateRule</a>(body, pattern, mode-&gt;name(), <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a49bf9201d144a5d429f4fcd5fa80902a">TemplateCompress</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                mode-&gt;finalize();</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="comment">/* Add templates in mode #all to all other modes.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">         *</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">         * We do this after the templates has been typechecked and compressed,</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">         * since otherwise it will be done N times for the built-in templates,</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">         * where N is the count of different templates, instead of once. */</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <span class="keyword">const</span> <a class="code" href="classQXmlName.html">QXmlName</a> nameModeAll(<a class="code" href="classQXmlName.html">QXmlName</a>(<a class="code" href="classQPatternist_1_1StandardNamespaces.html#adaea7603886ffbd6f6af26e16559c79ca648fcdea8305ad0045377d584ef46cfa">StandardNamespaces::InternalXSLT</a>,</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                                                <a class="code" href="classQPatternist_1_1StandardLocalNames.html#a0eae151cb1e48fb3c2fb1f9043d91187af0ccd5a099f11242902188b156aadb1a">StandardLocalNames::all</a>));</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1TemplateMode.html#a7dc315ba2b1045150b15190b3aa381c0">TemplateMode::Ptr</a> &amp;modeAll = <a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;templateRules[nameModeAll];</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <a class="code" href="qglobal_8h.html#a2c9a16e97bc3d9f0322dc570a48c8514">Q_ASSERT_X</a>(modeAll, <a class="code" href="qglobal_8h.html#ab027650838b4bee7b6d3d4edb3ceb463">Q_FUNC_INFO</a>,</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                       <span class="stringliteral">&quot;We should at least have the builtin templates.&quot;</span>);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            QHashIterator&lt;QXmlName, TemplateMode::Ptr&gt; <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>(<a class="code" href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a>-&gt;templateRules);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">while</span>(<a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.hasNext())</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.next();</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                <span class="comment">/* Don&#39;t add mode #all to mode #all. */</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.key()  == nameModeAll)</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.value()-&gt;addMode(modeAll);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">/* Type check and compress the query body. */</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;----- Initial AST build. -----&quot;</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a8ad60eb598b2505185953a9c637a8baf">processTreePass</a>(result, <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1e24559a15fc656773654db5ad8210dc">QueryBodyInitial</a>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;------------------------------&quot;</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;-----     Type Check     -----&quot;</span>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a39c0cf2e2ad8560d583a01412b3195f2">registerLastPath</a>(result);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        result-&gt;rewrite(result, result-&gt;typeCheck(context, requiredType), context);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a8ad60eb598b2505185953a9c637a8baf">processTreePass</a>(result, <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a861d0ff545533fdf6ea0e0906ecfd0cb">QueryBodyTypeCheck</a>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;------------------------------&quot;</span>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;-----      Compress      -----&quot;</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        result-&gt;rewrite(result, result-&gt;compress(context), context);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a8ad60eb598b2505185953a9c637a8baf">processTreePass</a>(result, <a class="code" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ab44ba6cfe3274f09bd4220d7ab6325c6">QueryBodyCompression</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">pDebug</a>() &lt;&lt; <span class="stringliteral">&quot;------------------------------&quot;</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;}</div><div class="ttc" id="classQPatternist_1_1StandardLocalNames_html_a0eae151cb1e48fb3c2fb1f9043d91187af0ccd5a099f11242902188b156aadb1a"><div class="ttname"><a href="classQPatternist_1_1StandardLocalNames.html#a0eae151cb1e48fb3c2fb1f9043d91187af0ccd5a099f11242902188b156aadb1a">QPatternist::StandardLocalNames::all</a></div><div class="ttdef"><b>Definition:</b> <a href="qnamepool__p_8h_source.html#l00319">qnamepool_p.h:319</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26a1e24559a15fc656773654db5ad8210dc"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1e24559a15fc656773654db5ad8210dc">QPatternist::ExpressionFactory::QueryBodyInitial</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00096">qexpressionfactory_p.h:96</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a9c701185420c968e2b68ca67b3a6e2e7a49bf9201d144a5d429f4fcd5fa80902a"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a49bf9201d144a5d429f4fcd5fa80902a">QPatternist::ExpressionFactory::TemplateCompress</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00146">qexpressionfactory_p.h:146</a></div></div>
<div class="ttc" id="classQUrl_html_a6a1c0794c8796e3dead0dc5110b62f87"><div class="ttname"><a href="classQUrl.html#a6a1c0794c8796e3dead0dc5110b62f87">QUrl::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">Returns true if the URL is valid; otherwise returns false. </div><div class="ttdef"><b>Definition:</b> <a href="qurl_8cpp_source.html#l04303">qurl.cpp:4303</a></div></div>
<div class="ttc" id="qelapsedtimer__mac_8cpp_html_aa73cc0d6f0ccfa40c6cb4f7509896845"><div class="ttname"><a href="qelapsedtimer__mac_8cpp.html#aa73cc0d6f0ccfa40c6cb4f7509896845">info</a></div><div class="ttdeci">static mach_timebase_info_data_t info</div><div class="ttdef"><b>Definition:</b> <a href="qelapsedtimer__mac_8cpp_source.html#l00060">qelapsedtimer_mac.cpp:60</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26a861d0ff545533fdf6ea0e0906ecfd0cb"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a861d0ff545533fdf6ea0e0906ecfd0cb">QPatternist::ExpressionFactory::QueryBodyTypeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00097">qexpressionfactory_p.h:97</a></div></div>
<div class="ttc" id="classQPatternist_1_1TemplatePattern_html_a830546833485b3b030b18536209d09ed"><div class="ttname"><a href="classQPatternist_1_1TemplatePattern.html#a830546833485b3b030b18536209d09ed">QPatternist::TemplatePattern::ID</a></div><div class="ttdeci">int ID</div><div class="ttdef"><b>Definition:</b> <a href="qtemplatepattern__p_8h_source.html#l00081">qtemplatepattern_p.h:81</a></div></div>
<div class="ttc" id="namespaceQPatternist_html_af1feb7b659b34bf54de32a451ebe3bcc"><div class="ttname"><a href="namespaceQPatternist.html#af1feb7b659b34bf54de32a451ebe3bcc">QPatternist::formatKeyword</a></div><div class="ttdeci">QString formatKeyword(const QString &amp;keyword)</div><div class="ttdef"><b>Definition:</b> <a href="qpatternistlocale__p_8h_source.html#l00094">qpatternistlocale_p.h:94</a></div></div>
<div class="ttc" id="classQPatternist_1_1CommonSequenceTypes_html_a1764ed5dbb1df01118ea5a4b08c98650"><div class="ttname"><a href="classQPatternist_1_1CommonSequenceTypes.html#a1764ed5dbb1df01118ea5a4b08c98650">QPatternist::CommonSequenceTypes::ZeroOrMoreItems</a></div><div class="ttdeci">static const SequenceType::Ptr ZeroOrMoreItems</div><div class="ttdef"><b>Definition:</b> <a href="qcommonsequencetypes__p_8h_source.html#l00096">qcommonsequencetypes_p.h:96</a></div></div>
<div class="ttc" id="qbuiltintypes_8cpp_html_a4e07b4d2e18ae9aeb657c68498982966"><div class="ttname"><a href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a></div><div class="ttdeci">#define it(className, varName)</div><div class="ttdef"><b>Definition:</b> <a href="qbuiltintypes_8cpp_source.html#l00095">qbuiltintypes.cpp:95</a></div></div>
<div class="ttc" id="classQXmlQuery_html_aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146"><div class="ttname"><a href="classQXmlQuery.html#aa895b136a57dc1b34cb007ec2f197d69a441ec4d5b295b6f11b40174d96f1c146">QXmlQuery::XSLT20</a></div><div class="ttdef"><b>Definition:</b> <a href="qxmlquery_8h_source.html#l00085">qxmlquery.h:85</a></div></div>
<div class="ttc" id="qglobal_8h_html_ac29a7ecc02f777dfeb2b68a051561c35"><div class="ttname"><a href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a></div><div class="ttdeci">#define Q_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01823">qglobal.h:1823</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26ab44ba6cfe3274f09bd4220d7ab6325c6"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ab44ba6cfe3274f09bd4220d7ab6325c6">QPatternist::ExpressionFactory::QueryBodyCompression</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00098">qexpressionfactory_p.h:98</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26a3de414b4070fa8110007dab8b0c58720"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a3de414b4070fa8110007dab8b0c58720">QPatternist::ExpressionFactory::UserFunctionCompression</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00100">qexpressionfactory_p.h:100</a></div></div>
<div class="ttc" id="classQList_html_ac220ce1c155db1ac44146c12d178056f"><div class="ttname"><a href="classQList.html#ac220ce1c155db1ac44146c12d178056f">QList&lt; UserFunction::Ptr &gt;::const_iterator</a></div><div class="ttdeci">friend class const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="qlist_8h_source.html#l00264">qlist.h:264</a></div></div>
<div class="ttc" id="classQPatternist_1_1Template_html_a73e8d0fc09f525e8e0c5148d751a6f6e"><div class="ttname"><a href="classQPatternist_1_1Template.html#a73e8d0fc09f525e8e0c5148d751a6f6e">QPatternist::Template::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; Template &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qtemplate__p_8h_source.html#l00089">qtemplate_p.h:89</a></div></div>
<div class="ttc" id="classQPatternist_1_1ReportContext_html_afea4f5685a1cdad5ec355ec950a96244af75ef82c3e30e43485c6c4d182ed1b4a"><div class="ttname"><a href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244af75ef82c3e30e43485c6c4d182ed1b4a">QPatternist::ReportContext::XPST0003</a></div><div class="ttdef"><b>Definition:</b> <a href="qreportcontext__p_8h_source.html#l00177">qreportcontext_p.h:177</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a9c701185420c968e2b68ca67b3a6e2e7a643ce119a3efb378008e83a3d51db664"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a643ce119a3efb378008e83a3d51db664">QPatternist::ExpressionFactory::TemplateInitial</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00144">qexpressionfactory_p.h:144</a></div></div>
<div class="ttc" id="classQPatternist_1_1TemplatePattern_html_ab809786d424395fb258b5f5bab6c594f"><div class="ttname"><a href="classQPatternist_1_1TemplatePattern.html#ab809786d424395fb258b5f5bab6c594f">QPatternist::TemplatePattern::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; TemplatePattern &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qtemplatepattern__p_8h_source.html#l00079">qtemplatepattern_p.h:79</a></div></div>
<div class="ttc" id="classQSourceLocation_html"><div class="ttname"><a href="classQSourceLocation.html">QSourceLocation</a></div><div class="ttdoc">The QSourceLocation class identifies a location in a resource by URI, line, and column. </div><div class="ttdef"><b>Definition:</b> <a href="qsourcelocation_8h_source.html#l00056">qsourcelocation.h:56</a></div></div>
<div class="ttc" id="classQPatternist_1_1BuiltinTypes_html_aaf823c6fe47bd96883c254425418dab0"><div class="ttname"><a href="classQPatternist_1_1BuiltinTypes.html#aaf823c6fe47bd96883c254425418dab0">QPatternist::BuiltinTypes::node</a></div><div class="ttdeci">static const AnyNodeType::Ptr node</div><div class="ttdef"><b>Definition:</b> <a href="qbuiltintypes__p_8h_source.html#l00141">qbuiltintypes_p.h:141</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a9c701185420c968e2b68ca67b3a6e2e7a7c1a51e2a40057710cfa1c8198879528"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7a7c1a51e2a40057710cfa1c8198879528">QPatternist::ExpressionFactory::TemplateTypeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00145">qexpressionfactory_p.h:145</a></div></div>
<div class="ttc" id="classQPatternist_1_1Expression_html_a609053b5390dfa98c37d457598d1f6fd"><div class="ttname"><a href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">QPatternist::Expression::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; Expression &gt; Ptr</div><div class="ttdoc">A smart pointer wrapping mutable Expression instances. </div><div class="ttdef"><b>Definition:</b> <a href="qexpression__p_8h_source.html#l00173">qexpression_p.h:173</a></div></div>
<div class="ttc" id="classQPatternist_1_1ItemType_html_af1d595e762893d3877b30061df4df297"><div class="ttname"><a href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">QPatternist::ItemType::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; ItemType &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qitemtype__p_8h_source.html#l00088">qitemtype_p.h:88</a></div></div>
<div class="ttc" id="qglobal_8h_html_a2c9a16e97bc3d9f0322dc570a48c8514"><div class="ttname"><a href="qglobal_8h.html#a2c9a16e97bc3d9f0322dc570a48c8514">Q_ASSERT_X</a></div><div class="ttdeci">#define Q_ASSERT_X(cond, where, what)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01837">qglobal.h:1837</a></div></div>
<div class="ttc" id="classQXmlName_html"><div class="ttname"><a href="classQXmlName.html">QXmlName</a></div><div class="ttdoc">The QXmlName class represents the name of an XML node, in an efficient, namespace-aware way...</div><div class="ttdef"><b>Definition:</b> <a href="qxmlname_8h_source.html#l00058">qxmlname.h:58</a></div></div>
<div class="ttc" id="classQPatternist_1_1ParserContext_html_a54d987cfee85f8a38017ed221aeecfbc"><div class="ttname"><a href="classQPatternist_1_1ParserContext.html#a54d987cfee85f8a38017ed221aeecfbc">QPatternist::ParserContext::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; ParserContext &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qparsercontext__p_8h_source.html#l00090">qparsercontext_p.h:90</a></div></div>
<div class="ttc" id="classQPatternist_1_1OptimizationPasses_1_1Coordinator_html_a54a1ba54045a29b42c254c227c77f49d"><div class="ttname"><a href="classQPatternist_1_1OptimizationPasses_1_1Coordinator.html#a54a1ba54045a29b42c254c227c77f49d">QPatternist::OptimizationPasses::Coordinator::init</a></div><div class="ttdeci">static void init()</div><div class="ttdef"><b>Definition:</b> <a href="qoptimizationpasses_8cpp_source.html#l00056">qoptimizationpasses.cpp:56</a></div></div>
<div class="ttc" id="classQPatternist_1_1TemplateMode_html_a7dc315ba2b1045150b15190b3aa381c0"><div class="ttname"><a href="classQPatternist_1_1TemplateMode.html#a7dc315ba2b1045150b15190b3aa381c0">QPatternist::TemplateMode::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; TemplateMode &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qtemplatemode__p_8h_source.html#l00077">qtemplatemode_p.h:77</a></div></div>
<div class="ttc" id="classQPatternist_1_1VariableDeclaration_html_a21bea9155483c72e9f3544a012a13bffa9c17e69988664cb7e1e97be410e44225"><div class="ttname"><a href="classQPatternist_1_1VariableDeclaration.html#a21bea9155483c72e9f3544a012a13bffa9c17e69988664cb7e1e97be410e44225">QPatternist::VariableDeclaration::ExternalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="qvariabledeclaration__p_8h_source.html#l00109">qvariabledeclaration_p.h:109</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26a1c52d4d084296ccbe2b7c7963ec81065"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26a1c52d4d084296ccbe2b7c7963ec81065">QPatternist::ExpressionFactory::UserFunctionTypeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00099">qexpressionfactory_p.h:99</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a8ad60eb598b2505185953a9c637a8baf"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a8ad60eb598b2505185953a9c637a8baf">QPatternist::ExpressionFactory::processTreePass</a></div><div class="ttdeci">virtual void processTreePass(const Expression::Ptr &amp;tree, const CompilationStage stage)</div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory_8cpp_source.html#l00445">qexpressionfactory.cpp:445</a></div></div>
<div class="ttc" id="classQPatternist_1_1StandardNamespaces_html_adaea7603886ffbd6f6af26e16559c79ca648fcdea8305ad0045377d584ef46cfa"><div class="ttname"><a href="classQPatternist_1_1StandardNamespaces.html#adaea7603886ffbd6f6af26e16559c79ca648fcdea8305ad0045377d584ef46cfa">QPatternist::StandardNamespaces::InternalXSLT</a></div><div class="ttdef"><b>Definition:</b> <a href="qnamepool__p_8h_source.html#l00305">qnamepool_p.h:305</a></div></div>
<div class="ttc" id="classQVector_html_a01e19bfad7fefd3e97ef197f4ed2cceb"><div class="ttname"><a href="classQVector.html#a01e19bfad7fefd3e97ef197f4ed2cceb">QVector::const_iterator</a></div><div class="ttdeci">const T * const_iterator</div><div class="ttdoc">The QVector::const_iterator typedef provides an STL-style const iterator for QVector and QStack...</div><div class="ttdef"><b>Definition:</b> <a href="qvector_8h_source.html#l00245">qvector.h:245</a></div></div>
<div class="ttc" id="classQPatternist_1_1Tokenizer_html_aaca3177fce5959fb47b305e71a0f20b0"><div class="ttname"><a href="classQPatternist_1_1Tokenizer.html#aaca3177fce5959fb47b305e71a0f20b0">QPatternist::Tokenizer::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; Tokenizer &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qtokenizer__p_8h_source.html#l00163">qtokenizer_p.h:163</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a4d95e9acd8eb283c11494b64a7040c26ac47039c35f3a31d1607898cb7941284f"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26ac47039c35f3a31d1607898cb7941284f">QPatternist::ExpressionFactory::GlobalVariableTypeCheck</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory__p_8h_source.html#l00101">qexpressionfactory_p.h:101</a></div></div>
<div class="ttc" id="classQPatternist_1_1ReportContext_html_afea4f5685a1cdad5ec355ec950a96244a7d6d7ebf605ac098a78ccc515b89026c"><div class="ttname"><a href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244a7d6d7ebf605ac098a78ccc515b89026c">QPatternist::ReportContext::XTSE0650</a></div><div class="ttdef"><b>Definition:</b> <a href="qreportcontext__p_8h_source.html#l01242">qreportcontext_p.h:1242</a></div></div>
<div class="ttc" id="classQPatternist_1_1StaticContext_html_a2fa41879b54ba4937903c16ceac27675"><div class="ttname"><a href="classQPatternist_1_1StaticContext.html#a2fa41879b54ba4937903c16ceac27675">QPatternist::StaticContext::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; StaticContext &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qstaticcontext__p_8h_source.html#l00094">qstaticcontext_p.h:94</a></div></div>
<div class="ttc" id="namespaceQPatternist_html_ae3544b7e7783c91c557050a7e8ed49c9"><div class="ttname"><a href="namespaceQPatternist.html#ae3544b7e7783c91c557050a7e8ed49c9">QPatternist::XPathparse</a></div><div class="ttdeci">int XPathparse(QPatternist::ParserContext *const info)</div><div class="ttdoc">The entry point to the parser. </div></div>
<div class="ttc" id="qt__cocoa__helpers__mac_8mm_html_a875104226bb2d18c4bead75b19e75065"><div class="ttname"><a href="qt__cocoa__helpers__mac_8mm.html#a875104226bb2d18c4bead75b19e75065">end</a></div><div class="ttdeci">static const KeyPair *const end</div><div class="ttdef"><b>Definition:</b> <a href="qt__cocoa__helpers__mac_8mm_source.html#l00652">qt_cocoa_helpers_mac.mm:652</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a82abcb44a9502e60c77fb5c0004a3116"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a82abcb44a9502e60c77fb5c0004a3116">QPatternist::ExpressionFactory::processTemplateRule</a></div><div class="ttdeci">virtual void processTemplateRule(const Expression::Ptr &amp;body, const TemplatePattern::Ptr &amp;pattern, const QXmlName &amp;mode, const TemplateCompilationStage stage)</div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory_8cpp_source.html#l00450">qexpressionfactory.cpp:450</a></div></div>
<div class="ttc" id="qglobal_8h_html_ab50b9ec9f8efb4c169cbd1a13b1fe2b1"><div class="ttname"><a href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a></div><div class="ttdeci">#define Q_UNUSED(x)</div><div class="ttdoc">Indicates to the compiler that the parameter with the specified name is not used in the body of a fun...</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01729">qglobal.h:1729</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a39c0cf2e2ad8560d583a01412b3195f2"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a39c0cf2e2ad8560d583a01412b3195f2">QPatternist::ExpressionFactory::registerLastPath</a></div><div class="ttdeci">static void registerLastPath(const Expression::Ptr &amp;operand)</div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory_8cpp_source.html#l00428">qexpressionfactory.cpp:428</a></div></div>
<div class="ttc" id="classQPatternist_1_1ExpressionFactory_html_a49d6f16161868d3fb43efdcd3b39291b"><div class="ttname"><a href="classQPatternist_1_1ExpressionFactory.html#a49d6f16161868d3fb43efdcd3b39291b">QPatternist::ExpressionFactory::processNamedTemplate</a></div><div class="ttdeci">virtual void processNamedTemplate(const QXmlName &amp;name, const Expression::Ptr &amp;tree, const TemplateCompilationStage stage)</div><div class="ttdef"><b>Definition:</b> <a href="qexpressionfactory_8cpp_source.html#l00461">qexpressionfactory.cpp:461</a></div></div>
<div class="ttc" id="namespaceQPatternist_html_a27313e6865d167b6c9454589134e9b19"><div class="ttname"><a href="namespaceQPatternist.html#a27313e6865d167b6c9454589134e9b19">QPatternist::pDebug</a></div><div class="ttdeci">QNoDebug pDebug()</div><div class="ttdef"><b>Definition:</b> <a href="qdebug__p_8h_source.html#l00099">qdebug_p.h:99</a></div></div>
<div class="ttc" id="qglobal_8h_html_ab027650838b4bee7b6d3d4edb3ceb463"><div class="ttname"><a href="qglobal_8h.html#ab027650838b4bee7b6d3d4edb3ceb463">Q_FUNC_INFO</a></div><div class="ttdeci">#define Q_FUNC_INFO</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01871">qglobal.h:1871</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a49d6f16161868d3fb43efdcd3b39291b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49d6f16161868d3fb43efdcd3b39291b">&#9670;&nbsp;</a></span>processNamedTemplate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QPatternist::ExpressionFactory::processNamedTemplate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7">TemplateCompilationStage</a>&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qexpressionfactory_8cpp_source.html#l00461">461</a> of file <a class="el" href="qexpressionfactory_8cpp_source.html">qexpressionfactory.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qexpressionfactory_8cpp_source.html#l00128">createExpression()</a>.</p>
<div class="fragment"><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;{</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(name);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(tree);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(stage);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div><div class="ttc" id="qglobal_8h_html_ab50b9ec9f8efb4c169cbd1a13b1fe2b1"><div class="ttname"><a href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a></div><div class="ttdeci">#define Q_UNUSED(x)</div><div class="ttdoc">Indicates to the compiler that the parameter with the specified name is not used in the body of a fun...</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01729">qglobal.h:1729</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a82abcb44a9502e60c77fb5c0004a3116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82abcb44a9502e60c77fb5c0004a3116">&#9670;&nbsp;</a></span>processTemplateRule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QPatternist::ExpressionFactory::processTemplateRule </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1TemplatePattern.html#ab809786d424395fb258b5f5bab6c594f">TemplatePattern::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>pattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQXmlName.html">QXmlName</a> &amp;&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a9c701185420c968e2b68ca67b3a6e2e7">TemplateCompilationStage</a>&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qexpressionfactory_8cpp_source.html#l00450">450</a> of file <a class="el" href="qexpressionfactory_8cpp_source.html">qexpressionfactory.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qexpressionfactory_8cpp_source.html#l00128">createExpression()</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(body);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(pattern);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(mode);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a>(stage);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;}</div><div class="ttc" id="qglobal_8h_html_ab50b9ec9f8efb4c169cbd1a13b1fe2b1"><div class="ttname"><a href="qglobal_8h.html#ab50b9ec9f8efb4c169cbd1a13b1fe2b1">Q_UNUSED</a></div><div class="ttdeci">#define Q_UNUSED(x)</div><div class="ttdoc">Indicates to the compiler that the parameter with the specified name is not used in the body of a fun...</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01729">qglobal.h:1729</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ad60eb598b2505185953a9c637a8baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ad60eb598b2505185953a9c637a8baf">&#9670;&nbsp;</a></span>processTreePass()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QPatternist::ExpressionFactory::processTreePass </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a4d95e9acd8eb283c11494b64a7040c26">CompilationStage</a>&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is called by <a class="el" href="classQPatternist_1_1ExpressionFactory.html#a16b01d516847bc4815ebd89fd87265b2">createExpression()</a> each time after a pass on the AST has been completed. Under a typical compilation this function is thus called three times: after the initial build, after the <a class="el" href="classQPatternist_1_1Expression.html#a314b99853342df35885b95b6d90de737">Expression::typeCheck()</a> stage, and after <a class="el" href="classQPatternist_1_1Expression.html#a4554942bd3d1656f34f7ab09796e6f21">Expression::compress()</a>. <code>tree</code> is the AST after each pass.</p>
<p>This mechanism is currently used for debugging, since it provides a way of introspecting what the compilation process do to the tree. The current implementation do nothing. </p>

<p class="definition">Definition at line <a class="el" href="qexpressionfactory_8cpp_source.html#l00445">445</a> of file <a class="el" href="qexpressionfactory_8cpp_source.html">qexpressionfactory.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qexpressionfactory_8cpp_source.html#l00128">createExpression()</a>.</p>
<div class="fragment"><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;{</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a39c0cf2e2ad8560d583a01412b3195f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39c0cf2e2ad8560d583a01412b3195f2">&#9670;&nbsp;</a></span>registerLastPath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void QPatternist::ExpressionFactory::registerLastPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>operand</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Finds the last paths of a set of paths(if any) and tells the <a class="el" href="classQPatternist_1_1Path.html" title="Implements the path expression, containing two steps, such as in html/body. ">Path</a> so, such that it can generate the code for checking XPTY0018.</p>
<p>Must be called before typeCheck() is called on the operand, since the typeCheck() uses the information for type checking. </p>

<p class="definition">Definition at line <a class="el" href="qexpressionfactory_8cpp_source.html#l00428">428</a> of file <a class="el" href="qexpressionfactory_8cpp_source.html">qexpressionfactory.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qexpressionfactory_8cpp_source.html#l00128">createExpression()</a>, and <a class="el" href="qquerytransformparser_8cpp_source.html#l03427">QPatternist::yyparse()</a>.</p>
<div class="fragment"><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;{</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    OperandsIterator <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>(operand, <a class="code" href="classQPatternist_1_1OperandsIterator.html#a3b0963aded31635376642cb5eabad2fca897cf6114366072c09e454bc64ba7468">OperandsIterator::IncludeParent</a>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">Expression::Ptr</a> next(<a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.next());</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">while</span>(next)</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">if</span>(next-&gt;is(<a class="code" href="classQPatternist_1_1Expression.html#aa94468b8f57d019ef2ecb3a0b6979699adc8c1067e598fcea23b6b53309cc6049">Expression::IDPath</a>))</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            next-&gt;as&lt;<a class="code" href="classPath.html">Path</a>&gt;()-&gt;setLast();</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            next = <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.skipOperands();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            next = <a class="code" href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a>.next();</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="ttc" id="qbuiltintypes_8cpp_html_a4e07b4d2e18ae9aeb657c68498982966"><div class="ttname"><a href="qbuiltintypes_8cpp.html#a4e07b4d2e18ae9aeb657c68498982966">it</a></div><div class="ttdeci">#define it(className, varName)</div><div class="ttdef"><b>Definition:</b> <a href="qbuiltintypes_8cpp_source.html#l00095">qbuiltintypes.cpp:95</a></div></div>
<div class="ttc" id="classQPatternist_1_1OperandsIterator_html_a3b0963aded31635376642cb5eabad2fca897cf6114366072c09e454bc64ba7468"><div class="ttname"><a href="classQPatternist_1_1OperandsIterator.html#a3b0963aded31635376642cb5eabad2fca897cf6114366072c09e454bc64ba7468">QPatternist::OperandsIterator::IncludeParent</a></div><div class="ttdef"><b>Definition:</b> <a href="qoperandsiterator__p_8h_source.html#l00088">qoperandsiterator_p.h:88</a></div></div>
<div class="ttc" id="classPath_html"><div class="ttname"><a href="classPath.html">Path</a></div><div class="ttdoc">A Path object defines a path for use by PathView . </div></div>
<div class="ttc" id="classQPatternist_1_1Expression_html_a609053b5390dfa98c37d457598d1f6fd"><div class="ttname"><a href="classQPatternist_1_1Expression.html#a609053b5390dfa98c37d457598d1f6fd">QPatternist::Expression::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; Expression &gt; Ptr</div><div class="ttdoc">A smart pointer wrapping mutable Expression instances. </div><div class="ttdef"><b>Definition:</b> <a href="qexpression__p_8h_source.html#l00173">qexpression_p.h:173</a></div></div>
<div class="ttc" id="classQPatternist_1_1Expression_html_aa94468b8f57d019ef2ecb3a0b6979699adc8c1067e598fcea23b6b53309cc6049"><div class="ttname"><a href="classQPatternist_1_1Expression.html#aa94468b8f57d019ef2ecb3a0b6979699adc8c1067e598fcea23b6b53309cc6049">QPatternist::Expression::IDPath</a></div><div class="ttdef"><b>Definition:</b> <a href="qexpression__p_8h_source.html#l00472">qexpression_p.h:472</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/src/xmlpatterns/expr/<a class="el" href="qexpressionfactory__p_8h_source.html">qexpressionfactory_p.h</a></li>
<li>/src/xmlpatterns/expr/<a class="el" href="qexpressionfactory_8cpp_source.html">qexpressionfactory.cpp</a></li>
</ul>
</div><!-- contents -->

<hr class="footer"/><address class="footer"><small><a href="https://dreamswork.github.io/qt4/">Qt 4.8 Source Code Browser</a></small></address>
</body>
</html>
