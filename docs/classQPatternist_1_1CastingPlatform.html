<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Qt 4.8: QPatternist::CastingPlatform&lt; TSubClass, issueError &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="qt_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qt 4.8
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceQPatternist.html">QPatternist</a></li><li class="navelem"><a class="el" href="classQPatternist_1_1CastingPlatform.html">CastingPlatform</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Functions</a> &#124;
<a href="#pri-methods">Private Functions</a> &#124;
<a href="#pri-static-methods">Static Private Functions</a> &#124;
<a href="#pri-attribs">Properties</a> &#124;
<a href="classQPatternist_1_1CastingPlatform-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">QPatternist::CastingPlatform&lt; TSubClass, issueError &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides casting functionality for classes, such as <a class="el" href="classQPatternist_1_1CastAs.html" title="Implements XPath 2.0&#39;s cast as expression. ">CastAs</a> or <a class="el" href="classQPatternist_1_1NumberFN.html" title="Implements the function fn:number(). ">NumberFN</a>, which needs to perform casting.
 <a href="classQPatternist_1_1CastingPlatform.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="qcastingplatform__p_8h_source.html">qcastingplatform_p.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Functions</h2></td></tr>
<tr class="memitem:a164d3315e037416ce58d3d8344372479"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQPatternist_1_1Item.html">Item</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#a164d3315e037416ce58d3d8344372479">cast</a> (const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;sourceValue, const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;context) const</td></tr>
<tr class="separator:a164d3315e037416ce58d3d8344372479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b51be46431133dde5581bd4748858c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#ab5b51be46431133dde5581bd4748858c">CastingPlatform</a> (const <a class="el" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244">ReportContext::ErrorCode</a> code=<a class="el" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244a6d4bd27c824e240dddb40c2c4de798ed">ReportContext::FORG0001</a>)</td></tr>
<tr class="separator:ab5b51be46431133dde5581bd4748858c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d736347dddede8006cbfcba2e1d9b76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#a4d736347dddede8006cbfcba2e1d9b76">checkTargetType</a> (const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;context) const</td></tr>
<tr class="separator:a4d736347dddede8006cbfcba2e1d9b76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b5b0d5e291ccaa5442a3c3f72cf9eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#a07b5b0d5e291ccaa5442a3c3f72cf9eb">prepareCasting</a> (const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;context, const <a class="el" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a> &amp;sourceType)</td></tr>
<tr class="separator:a07b5b0d5e291ccaa5442a3c3f72cf9eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Functions</h2></td></tr>
<tr class="memitem:ad01bc054e2f80b0e4e94d55f53969fa6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQPatternist_1_1Item.html">Item</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#ad01bc054e2f80b0e4e94d55f53969fa6">castWithCaster</a> (const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;sourceValue, const <a class="el" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a> &amp;caster, const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;context) const</td></tr>
<tr class="separator:ad01bc054e2f80b0e4e94d55f53969fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02245b3d591ebd4e23da19a93d44f6f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQPatternist_1_1Item.html">Item</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#a02245b3d591ebd4e23da19a93d44f6f1">castWithCaster</a> (const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;sourceValue, const <a class="el" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a> &amp;caster, const <a class="el" href="classQPatternist_1_1DynamicContext.html#a0cf4563d97fedc4d8e5ffd74b528ae5a">DynamicContext::Ptr</a> &amp;context) const</td></tr>
<tr class="separator:a02245b3d591ebd4e23da19a93d44f6f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82c5b5e93593a2fc2185ae191980586"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#ae82c5b5e93593a2fc2185ae191980586">issueCastError</a> (const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;validationError, const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;sourceValue, const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;context) const</td></tr>
<tr class="separator:ae82c5b5e93593a2fc2185ae191980586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9fcf1d1d42f62c4c3676277d80b6385"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a> () const</td></tr>
<tr class="separator:ac9fcf1d1d42f62c4c3676277d80b6385"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Functions</h2></td></tr>
<tr class="memitem:afbce82ed1d8df763d395bf415d296c80"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#afbce82ed1d8df763d395bf415d296c80">locateCaster</a> (const <a class="el" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a> &amp;sourceType, const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;context, bool &amp;castImpossible, const <a class="el" href="classQPatternist_1_1SourceLocationReflection.html">SourceLocationReflection</a> *const <a class="el" href="qscriptparser_8cpp.html#aa5a29cfc32f83b39bed51a3d9d4fab30">location</a>, const <a class="el" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a> &amp;<a class="el" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>)</td></tr>
<tr class="separator:afbce82ed1d8df763d395bf415d296c80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Properties</h2></td></tr>
<tr class="memitem:ab3ea3242b28b42b401ee6eef9dfc870e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#ab3ea3242b28b42b401ee6eef9dfc870e">m_caster</a></td></tr>
<tr class="separator:ab3ea3242b28b42b401ee6eef9dfc870e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0800f65e07ad372a61649ccaff243d76"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244">ReportContext::ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQPatternist_1_1CastingPlatform.html#a0800f65e07ad372a61649ccaff243d76">m_errorCode</a></td></tr>
<tr class="separator:a0800f65e07ad372a61649ccaff243d76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename TSubClass, const bool issueError&gt;<br />
class QPatternist::CastingPlatform&lt; TSubClass, issueError &gt;</h3>

<p>Provides casting functionality for classes, such as <a class="el" href="classQPatternist_1_1CastAs.html" title="Implements XPath 2.0&#39;s cast as expression. ">CastAs</a> or <a class="el" href="classQPatternist_1_1NumberFN.html" title="Implements the function fn:number(). ">NumberFN</a>, which needs to perform casting. </p>
<p>Classes which need to perform casting can simply from this class and gain access to casting functinality wrapped in a convenient way. At the center of this class is the <a class="el" href="classQPatternist_1_1CastingPlatform.html#a164d3315e037416ce58d3d8344372479">cast()</a> function, which is used at runtime to perform the actual cast.</p>
<p>The actual circumstances where casting is used, such as in the 'castable as' expression or the <code>fn:number()</code> function, often have other things to handle as well, error handling and cardinality checks for example. This class handles only casting and leaves the other case-specific details to the sub-class such that this class only do one thing well.</p>
<p>This template class takes two parameters:</p><ul>
<li>TSubClass This should be the class inheriting from <a class="el" href="classQPatternist_1_1CastingPlatform.html" title="Provides casting functionality for classes, such as CastAs or NumberFN, which needs to perform castin...">CastingPlatform</a>.</li>
<li>issueError if true, errors are issued via <a class="el" href="classQPatternist_1_1ReportContext.html" title="A callback for reporting errors. ">ReportContext</a>, otherwise <a class="el" href="classQPatternist_1_1ValidationError.html" title="Used for signalling casting errors. ">ValidationError</a> instances are returned appropriately.</li>
</ul>
<p>The class inheriting <a class="el" href="classQPatternist_1_1CastingPlatform.html" title="Provides casting functionality for classes, such as CastAs or NumberFN, which needs to perform castin...">CastingPlatform</a> must implement the following function: </p><div class="fragment"><div class="line"><a class="code" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a> <a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>() const</div></div><!-- fragment --><p>that returns the type that should be cast to. The type must be an <a class="el" href="classQPatternist_1_1AtomicType.html" title="Base class for all classes that implements atomic types. ">AtomicType</a>. Typically, it is appropriate to declare this function <code>inline</code>.</p>
<p>A sub-class calls <a class="el" href="classQPatternist_1_1CastingPlatform.html#a07b5b0d5e291ccaa5442a3c3f72cf9eb">prepareCasting()</a> at compile time(such that <a class="el" href="classQPatternist_1_1CastingPlatform.html" title="Provides casting functionality for classes, such as CastAs or NumberFN, which needs to perform castin...">CastingPlatform</a> can attempt to lookup the proper <a class="el" href="classQPatternist_1_1AtomicCaster.html" title="AtomicCaster is an abstract base class for classes that performs casting between two atomic values of...">AtomicCaster</a>) and then it simply uses the <a class="el" href="classQPatternist_1_1CastingPlatform.html#a164d3315e037416ce58d3d8344372479">cast()</a> function at runtime. The function <a class="el" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType()</a> must be implemented such that <a class="el" href="classQPatternist_1_1CastingPlatform.html" title="Provides casting functionality for classes, such as CastAs or NumberFN, which needs to perform castin...">CastingPlatform</a> knows what type it shall cast to.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classQPatternist_1_1ValueFactory.html" title="Provides fromLexical(), which allows instantiation of atomic values from arbitrary types...">ValueFactory</a> </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Frans Englich <a href="#" onclick="location.href='mai'+'lto:'+'fra'+'ns'+'.en'+'gl'+'ich'+'@n'+'oki'+'a.'+'com'; return false;">frans<span style="display: none;">.nosp@m.</span>.eng<span style="display: none;">.nosp@m.</span>lich@<span style="display: none;">.nosp@m.</span>noki<span style="display: none;">.nosp@m.</span>a.com</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="qcastingplatform__p_8h_source.html#l00110">110</a> of file <a class="el" href="qcastingplatform__p_8h_source.html">qcastingplatform_p.h</a>.</p>
</div><h2 class="groupheader">Constructors and Destructors</h2>
<a id="ab5b51be46431133dde5581bd4748858c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5b51be46431133dde5581bd4748858c">&#9670;&nbsp;</a></span>CastingPlatform()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass, const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::<a class="el" href="classQPatternist_1_1CastingPlatform.html">CastingPlatform</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244">ReportContext::ErrorCode</a>&#160;</td>
          <td class="paramname"><em>code</em> = <code><a class="el" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244a6d4bd27c824e240dddb40c2c4de798ed">ReportContext::FORG0001</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd><a class="el" href="classQPatternist_1_1CastingPlatform.html#ae82c5b5e93593a2fc2185ae191980586">issueCastError()</a> depends on the default value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qcastingplatform__p_8h_source.html#l00116">116</a> of file <a class="el" href="qcastingplatform__p_8h_source.html">qcastingplatform_p.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                                                                          : <a class="code" href="classQPatternist_1_1CastingPlatform.html#a0800f65e07ad372a61649ccaff243d76">m_errorCode</a>(code)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div><div class="ttc" id="classQPatternist_1_1CastingPlatform_html_a0800f65e07ad372a61649ccaff243d76"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#a0800f65e07ad372a61649ccaff243d76">QPatternist::CastingPlatform::m_errorCode</a></div><div class="ttdeci">const ReportContext::ErrorCode m_errorCode</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00195">qcastingplatform_p.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Functions</h2>
<a id="a164d3315e037416ce58d3d8344372479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a164d3315e037416ce58d3d8344372479">&#9670;&nbsp;</a></span>cast()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass , const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1Item.html">Item</a> <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::cast </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;&#160;</td>
          <td class="paramname"><em>sourceValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempts to cast <code>sourceValue</code> to <a class="el" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType()</a>, and returns the created value. Remember that <a class="el" href="classQPatternist_1_1CastingPlatform.html#a07b5b0d5e291ccaa5442a3c3f72cf9eb">prepareCasting()</a> should have been called at compile time, otherwise this function will be slow.</p>
<p>Error reporting is done in two ways. If a cast fails because of an error in lexical representation a <a class="el" href="classQPatternist_1_1ValidationError.html" title="Used for signalling casting errors. ">ValidationError</a> is returned. If the cause of failure is that the casting combination is invalid(such as when attempting to cast <code>xs:date</code> to <code>xs:integer</code>), a <a class="el" href="classQPatternist_1_1ValidationError.html" title="Used for signalling casting errors. ">ValidationError</a> is returned if <code>false</code> was passed in the template instantiation, an error is issued via <code>context</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sourceValue</td><td>the value to cast. Must be non <code>null</code>. </td></tr>
    <tr><td class="paramname">context</td><td>the usual <a class="el" href="classQPatternist_1_1ReportContext.html" title="A callback for reporting errors. ">ReportContext</a>, used for error reporting. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the new value which was the result of the cast. If the cast failed, an <a class="el" href="classQPatternist_1_1ValidationError.html" title="Used for signalling casting errors. ">ValidationError</a> is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qcastingplatform_8cpp_source.html#l00074">74</a> of file <a class="el" href="qcastingplatform_8cpp_source.html">qcastingplatform.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qcastingplatform__p_8h_source.html#l00116">QPatternist::CastingPlatform&lt; UntypedAtomicConverter, true &gt;::CastingPlatform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(sourceValue);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(context);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(<a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>());</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classQPatternist_1_1CastingPlatform.html#ab3ea3242b28b42b401ee6eef9dfc870e">m_caster</a>)</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classQPatternist_1_1CastingPlatform.html#ad01bc054e2f80b0e4e94d55f53969fa6">castWithCaster</a>(sourceValue, <a class="code" href="classQPatternist_1_1CastingPlatform.html#ab3ea3242b28b42b401ee6eef9dfc870e">m_caster</a>, context);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordtype">bool</span> castImpossible = <span class="keyword">false</span>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a> caster(<a class="code" href="classQPatternist_1_1CastingPlatform.html#afbce82ed1d8df763d395bf415d296c80">locateCaster</a>(sourceValue.type(), context, castImpossible, <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>TSubClass *<span class="keyword">&gt;</span>(<span class="keyword">this</span>), <a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>()));</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">if</span>(!issueError &amp;&amp; castImpossible)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="comment">/* If we&#39;re supposed to issue an error(issueError) then this</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">             * line will never be reached, because locateCaster() will in</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">             * that case throw. */</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQPatternist_1_1ValidationError.html#aa65431cb73c3be9f6c4bd726eeabc070">ValidationError::createError</a>();</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classQPatternist_1_1CastingPlatform.html#ad01bc054e2f80b0e4e94d55f53969fa6">castWithCaster</a>(sourceValue, caster, context);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div><div class="ttc" id="classQPatternist_1_1ValidationError_html_aa65431cb73c3be9f6c4bd726eeabc070"><div class="ttname"><a href="classQPatternist_1_1ValidationError.html#aa65431cb73c3be9f6c4bd726eeabc070">QPatternist::ValidationError::createError</a></div><div class="ttdeci">static AtomicValue::Ptr createError(const QString &amp;description=QString(), const ReportContext::ErrorCode=ReportContext::FORG0001)</div><div class="ttdef"><b>Definition:</b> <a href="qvalidationerror_8cpp_source.html#l00055">qvalidationerror.cpp:55</a></div></div>
<div class="ttc" id="qglobal_8h_html_ac29a7ecc02f777dfeb2b68a051561c35"><div class="ttname"><a href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a></div><div class="ttdeci">#define Q_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01823">qglobal.h:1823</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ab3ea3242b28b42b401ee6eef9dfc870e"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ab3ea3242b28b42b401ee6eef9dfc870e">QPatternist::CastingPlatform::m_caster</a></div><div class="ttdeci">AtomicCaster::Ptr m_caster</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00194">qcastingplatform_p.h:194</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ac9fcf1d1d42f62c4c3676277d80b6385"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">QPatternist::CastingPlatform::targetType</a></div><div class="ttdeci">ItemType::Ptr targetType() const</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00183">qcastingplatform_p.h:183</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ad01bc054e2f80b0e4e94d55f53969fa6"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ad01bc054e2f80b0e4e94d55f53969fa6">QPatternist::CastingPlatform::castWithCaster</a></div><div class="ttdeci">Item castWithCaster(const Item &amp;sourceValue, const AtomicCaster::Ptr &amp;caster, const ReportContext::Ptr &amp;context) const</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform_8cpp_source.html#l00049">qcastingplatform.cpp:49</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_afbce82ed1d8df763d395bf415d296c80"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#afbce82ed1d8df763d395bf415d296c80">QPatternist::CastingPlatform::locateCaster</a></div><div class="ttdeci">static AtomicCaster::Ptr locateCaster(const ItemType::Ptr &amp;sourceType, const ReportContext::Ptr &amp;context, bool &amp;castImpossible, const SourceLocationReflection *const location, const ItemType::Ptr &amp;targetType)</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform_8cpp_source.html#l00121">qcastingplatform.cpp:121</a></div></div>
<div class="ttc" id="classQPatternist_1_1AtomicCaster_html_a5ab267deeceb2adde59c09a0d951a4d6"><div class="ttname"><a href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">QPatternist::AtomicCaster::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; AtomicCaster &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qatomiccaster__p_8h_source.html#l00075">qatomiccaster_p.h:75</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad01bc054e2f80b0e4e94d55f53969fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad01bc054e2f80b0e4e94d55f53969fa6">&#9670;&nbsp;</a></span>castWithCaster() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass , const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1Item.html">Item</a> <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::castWithCaster </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;&#160;</td>
          <td class="paramname"><em>sourceValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qcastingplatform_8cpp_source.html#l00049">49</a> of file <a class="el" href="qcastingplatform_8cpp_source.html">qcastingplatform.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qcastingplatform__p_8h_source.html#l00116">QPatternist::CastingPlatform&lt; UntypedAtomicConverter, true &gt;::CastingPlatform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(sourceValue);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(caster);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(context);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">const</span> <a class="code" href="classItem.html">Item</a> retval(caster-&gt;castFrom(sourceValue, context));</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">if</span>(issueError)</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">if</span>(retval.template as&lt;AtomicValue&gt;()-&gt;hasError())</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <a class="code" href="classQPatternist_1_1CastingPlatform.html#ae82c5b5e93593a2fc2185ae191980586">issueCastError</a>(retval, sourceValue, context);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classItem.html">Item</a>();</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="keywordflow">return</span> retval;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">return</span> retval;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div><div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ae82c5b5e93593a2fc2185ae191980586"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ae82c5b5e93593a2fc2185ae191980586">QPatternist::CastingPlatform::issueCastError</a></div><div class="ttdeci">void issueCastError(const Item &amp;validationError, const Item &amp;sourceValue, const ReportContext::Ptr &amp;context) const</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform_8cpp_source.html#l00187">qcastingplatform.cpp:187</a></div></div>
<div class="ttc" id="qglobal_8h_html_ac29a7ecc02f777dfeb2b68a051561c35"><div class="ttname"><a href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a></div><div class="ttdeci">#define Q_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01823">qglobal.h:1823</a></div></div>
<div class="ttc" id="classItem_html"><div class="ttname"><a href="classItem.html">Item</a></div><div class="ttdoc">The Item is the most basic of all visual items in QML. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02245b3d591ebd4e23da19a93d44f6f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02245b3d591ebd4e23da19a93d44f6f1">&#9670;&nbsp;</a></span>castWithCaster() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass, const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1Item.html">Item</a> <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::castWithCaster </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;&#160;</td>
          <td class="paramname"><em>sourceValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1DynamicContext.html#a0cf4563d97fedc4d8e5ffd74b528ae5a">DynamicContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4d736347dddede8006cbfcba2e1d9b76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d736347dddede8006cbfcba2e1d9b76">&#9670;&nbsp;</a></span>checkTargetType()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass , const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::checkTargetType </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks that the <a class="el" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType()</a> is a valid target type for <code>castable as</code> and <code>cast as</code>. For example, that it is not abstract. If the type is invalid, an error is raised via the <code>context</code>. Note that it is assumed the type is atomic. </p>

<p class="definition">Definition at line <a class="el" href="qcastingplatform_8cpp_source.html#l00166">166</a> of file <a class="el" href="qcastingplatform_8cpp_source.html">qcastingplatform.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qcastingplatform__p_8h_source.html#l00116">QPatternist::CastingPlatform&lt; UntypedAtomicConverter, true &gt;::CastingPlatform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(context);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a> tType(<a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>());</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(tType);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(tType-&gt;isAtomicType());</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1AtomicType.html#a4e3b5472d00d7277763f286bd36810f2">AtomicType::Ptr</a> asAtomic(tType);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">/* This catches casting to xs:NOTATION and xs:anyAtomicType. */</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span>(asAtomic-&gt;isAbstract())</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        context-&gt;error(QtXmlPatterns::tr(<span class="stringliteral">&quot;Casting to %1 is not possible because it &quot;</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                     <span class="stringliteral">&quot;is an abstract type, and can therefore never be instantiated.&quot;</span>)</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                .arg(<a class="code" href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">formatType</a>(context-&gt;namePool(), tType)),</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                          <a class="code" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244a0824b3e2f6e20d8d27db0f11f3786055">ReportContext::XPST0080</a>,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                          <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>TSubClass*<span class="keyword">&gt;</span>(<span class="keyword">this</span>));</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div><div class="ttc" id="namespaceQPatternist_html_a58bb911054247fc92da1806d4b4b6f98"><div class="ttname"><a href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">QPatternist::formatType</a></div><div class="ttdeci">QString formatType(const NamePool::Ptr &amp;np, const T &amp;type)</div><div class="ttdoc">Formats ItemType and SequenceType. </div><div class="ttdef"><b>Definition:</b> <a href="qpatternistlocale__p_8h_source.html#l00160">qpatternistlocale_p.h:160</a></div></div>
<div class="ttc" id="classQPatternist_1_1AtomicType_html_a4e3b5472d00d7277763f286bd36810f2"><div class="ttname"><a href="classQPatternist_1_1AtomicType.html#a4e3b5472d00d7277763f286bd36810f2">QPatternist::AtomicType::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; AtomicType &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qatomictype__p_8h_source.html#l00085">qatomictype_p.h:85</a></div></div>
<div class="ttc" id="qglobal_8h_html_ac29a7ecc02f777dfeb2b68a051561c35"><div class="ttname"><a href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a></div><div class="ttdeci">#define Q_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01823">qglobal.h:1823</a></div></div>
<div class="ttc" id="classQPatternist_1_1ReportContext_html_afea4f5685a1cdad5ec355ec950a96244a0824b3e2f6e20d8d27db0f11f3786055"><div class="ttname"><a href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244a0824b3e2f6e20d8d27db0f11f3786055">QPatternist::ReportContext::XPST0080</a></div><div class="ttdef"><b>Definition:</b> <a href="qreportcontext__p_8h_source.html#l00667">qreportcontext_p.h:667</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ac9fcf1d1d42f62c4c3676277d80b6385"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">QPatternist::CastingPlatform::targetType</a></div><div class="ttdeci">ItemType::Ptr targetType() const</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00183">qcastingplatform_p.h:183</a></div></div>
<div class="ttc" id="classQPatternist_1_1ItemType_html_af1d595e762893d3877b30061df4df297"><div class="ttname"><a href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">QPatternist::ItemType::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; ItemType &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qitemtype__p_8h_source.html#l00088">qitemtype_p.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae82c5b5e93593a2fc2185ae191980586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae82c5b5e93593a2fc2185ae191980586">&#9670;&nbsp;</a></span>issueCastError()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass , const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::issueCastError </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;&#160;</td>
          <td class="paramname"><em>validationError</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1Item.html">Item</a> &amp;&#160;</td>
          <td class="paramname"><em>sourceValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qcastingplatform_8cpp_source.html#l00187">187</a> of file <a class="el" href="qcastingplatform_8cpp_source.html">qcastingplatform.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qcastingplatform__p_8h_source.html#l00183">QPatternist::CastingPlatform&lt; UntypedAtomicConverter, true &gt;::targetType()</a>.</p>
<div class="fragment"><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(validationError);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(context);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(validationError.isAtomicValue());</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(validationError.template as&lt;AtomicValue&gt;()-&gt;hasError());</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1ValidationError.html#ad865436ce12057774dec167c024c36f5">ValidationError::Ptr</a> err(validationError.template as&lt;ValidationError&gt;());</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classQString.html">QString</a> msg(err-&gt;message());</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span>(msg.isNull())</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        msg = QtXmlPatterns::tr(<span class="stringliteral">&quot;It&#39;s not possible to cast the value %1 of type %2 to %3&quot;</span>)</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                 .<a class="code" href="classQString.html#adf76a6e2b0ad1299026263e535325a60">arg</a>(<a class="code" href="namespaceQPatternist.html#ac3ca619f86363644effc934f8a4f275e">formatData</a>(sourceValue.stringValue()))</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                 .<a class="code" href="classQString.html#adf76a6e2b0ad1299026263e535325a60">arg</a>(<a class="code" href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">formatType</a>(context-&gt;namePool(), sourceValue.type()))</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                 .<a class="code" href="classQString.html#adf76a6e2b0ad1299026263e535325a60">arg</a>(<a class="code" href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">formatType</a>(context-&gt;namePool(), <a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>()));</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(!msg.isEmpty());</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        msg = QtXmlPatterns::tr(<span class="stringliteral">&quot;Failure when casting from %1 to %2: %3&quot;</span>)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                 .arg(<a class="code" href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">formatType</a>(context-&gt;namePool(), sourceValue.type()))</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                 .arg(<a class="code" href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">formatType</a>(context-&gt;namePool(), <a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>()))</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                 .arg(msg);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">/* If m_errorCode is FORG0001, we assume our sub-classer doesn&#39;t have a</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">     * special wish about error code, so then we use the error object&#39;s code.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    context-&gt;error(msg, <a class="code" href="classQPatternist_1_1CastingPlatform.html#a0800f65e07ad372a61649ccaff243d76">m_errorCode</a> == <a class="code" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244a6d4bd27c824e240dddb40c2c4de798ed">ReportContext::FORG0001</a> ? err-&gt;errorCode() : <a class="code" href="classQPatternist_1_1CastingPlatform.html#a0800f65e07ad372a61649ccaff243d76">m_errorCode</a>,</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                   <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>TSubClass*<span class="keyword">&gt;</span>(<span class="keyword">this</span>));</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="ttc" id="namespaceQPatternist_html_a58bb911054247fc92da1806d4b4b6f98"><div class="ttname"><a href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">QPatternist::formatType</a></div><div class="ttdeci">QString formatType(const NamePool::Ptr &amp;np, const T &amp;type)</div><div class="ttdoc">Formats ItemType and SequenceType. </div><div class="ttdef"><b>Definition:</b> <a href="qpatternistlocale__p_8h_source.html#l00160">qpatternistlocale_p.h:160</a></div></div>
<div class="ttc" id="classQPatternist_1_1ReportContext_html_afea4f5685a1cdad5ec355ec950a96244a6d4bd27c824e240dddb40c2c4de798ed"><div class="ttname"><a href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244a6d4bd27c824e240dddb40c2c4de798ed">QPatternist::ReportContext::FORG0001</a></div><div class="ttdef"><b>Definition:</b> <a href="qreportcontext__p_8h_source.html#l00869">qreportcontext_p.h:869</a></div></div>
<div class="ttc" id="classQString_html"><div class="ttname"><a href="classQString.html">QString</a></div><div class="ttdoc">The QString class provides a Unicode character string. </div><div class="ttdef"><b>Definition:</b> <a href="qstring_8h_source.html#l00083">qstring.h:83</a></div></div>
<div class="ttc" id="qglobal_8h_html_ac29a7ecc02f777dfeb2b68a051561c35"><div class="ttname"><a href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a></div><div class="ttdeci">#define Q_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01823">qglobal.h:1823</a></div></div>
<div class="ttc" id="namespaceQPatternist_html_ac3ca619f86363644effc934f8a4f275e"><div class="ttname"><a href="namespaceQPatternist.html#ac3ca619f86363644effc934f8a4f275e">QPatternist::formatData</a></div><div class="ttdeci">static QString formatData(const QString &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="qpatternistlocale__p_8h_source.html#l00228">qpatternistlocale_p.h:228</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ac9fcf1d1d42f62c4c3676277d80b6385"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">QPatternist::CastingPlatform::targetType</a></div><div class="ttdeci">ItemType::Ptr targetType() const</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00183">qcastingplatform_p.h:183</a></div></div>
<div class="ttc" id="classQPatternist_1_1ValidationError_html_ad865436ce12057774dec167c024c36f5"><div class="ttname"><a href="classQPatternist_1_1ValidationError.html#ad865436ce12057774dec167c024c36f5">QPatternist::ValidationError::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; ValidationError &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qvalidationerror__p_8h_source.html#l00073">qvalidationerror_p.h:73</a></div></div>
<div class="ttc" id="classQString_html_adf76a6e2b0ad1299026263e535325a60"><div class="ttname"><a href="classQString.html#adf76a6e2b0ad1299026263e535325a60">QString::arg</a></div><div class="ttdeci">QString arg(qlonglong a, int fieldwidth=0, int base=10, const QChar &amp;fillChar=QLatin1Char(' ')) const Q_REQUIRED_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="qstring_8cpp_source.html#l07186">qstring.cpp:7186</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_a0800f65e07ad372a61649ccaff243d76"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#a0800f65e07ad372a61649ccaff243d76">QPatternist::CastingPlatform::m_errorCode</a></div><div class="ttdeci">const ReportContext::ErrorCode m_errorCode</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00195">qcastingplatform_p.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afbce82ed1d8df763d395bf415d296c80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbce82ed1d8df763d395bf415d296c80">&#9670;&nbsp;</a></span>locateCaster()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass , const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a> <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::locateCaster </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>sourceType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>castImpossible</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1SourceLocationReflection.html">SourceLocationReflection</a> *const&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>targetType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Locates the caster for casting values of type <code>sourceType</code> to <a class="el" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType()</a>, if possible.</p>
<p><code>castImpossible</code> is not initialized. Initialize it to <code>false</code>. </p>

<p class="definition">Definition at line <a class="el" href="qcastingplatform_8cpp_source.html#l00121">121</a> of file <a class="el" href="qcastingplatform_8cpp_source.html">qcastingplatform.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qcastingplatform__p_8h_source.html#l00116">QPatternist::CastingPlatform&lt; UntypedAtomicConverter, true &gt;::CastingPlatform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(sourceType);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(<a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1AtomicCasterLocator.html#a4ab34f8fec6d9ab2a06ccededfb61b74">AtomicCasterLocator::Ptr</a> locator(static_cast&lt;AtomicType *&gt;(</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>.<a class="code" href="classQExplicitlySharedDataPointer.html#a528078f96b7d557e3cb2bbeaeee34de7">data</a>())-&gt;casterLocator());</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span>(!locator)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">if</span>(issueError)</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            context-&gt;error(QtXmlPatterns::tr(<span class="stringliteral">&quot;No casting is possible with %1 as the target type.&quot;</span>)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                        .arg(<a class="code" href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">formatType</a>(context-&gt;namePool(), <a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>)),</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                       <a class="code" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244abfcd1a1d6f6ca90bfb04b13144bbb529">ReportContext::XPTY0004</a>, <a class="code" href="namespaceQTest.html#a3c31a30602a37d9cd63e265fa6420fc1">location</a>);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            castImpossible = <span class="keyword">true</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a>();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keyword">const</span> <a class="code" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a> caster(static_cast&lt;const AtomicType *&gt;(sourceType.data())-&gt;accept(locator, <a class="code" href="namespaceQTest.html#a3c31a30602a37d9cd63e265fa6420fc1">location</a>));</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span>(!caster)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">if</span>(issueError)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            context-&gt;error(QtXmlPatterns::tr(<span class="stringliteral">&quot;It is not possible to cast from %1 to %2.&quot;</span>)</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                            .arg(<a class="code" href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">formatType</a>(context-&gt;namePool(), sourceType))</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                                            .arg(<a class="code" href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">formatType</a>(context-&gt;namePool(), <a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>)),</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                       <a class="code" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244abfcd1a1d6f6ca90bfb04b13144bbb529">ReportContext::XPTY0004</a>, <a class="code" href="namespaceQTest.html#a3c31a30602a37d9cd63e265fa6420fc1">location</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            castImpossible = <span class="keyword">true</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a>();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> caster;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="ttc" id="classQPatternist_1_1ReportContext_html_afea4f5685a1cdad5ec355ec950a96244abfcd1a1d6f6ca90bfb04b13144bbb529"><div class="ttname"><a href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244abfcd1a1d6f6ca90bfb04b13144bbb529">QPatternist::ReportContext::XPTY0004</a></div><div class="ttdef"><b>Definition:</b> <a href="qreportcontext__p_8h_source.html#l00187">qreportcontext_p.h:187</a></div></div>
<div class="ttc" id="namespaceQPatternist_html_a58bb911054247fc92da1806d4b4b6f98"><div class="ttname"><a href="namespaceQPatternist.html#a58bb911054247fc92da1806d4b4b6f98">QPatternist::formatType</a></div><div class="ttdeci">QString formatType(const NamePool::Ptr &amp;np, const T &amp;type)</div><div class="ttdoc">Formats ItemType and SequenceType. </div><div class="ttdef"><b>Definition:</b> <a href="qpatternistlocale__p_8h_source.html#l00160">qpatternistlocale_p.h:160</a></div></div>
<div class="ttc" id="qglobal_8h_html_ac29a7ecc02f777dfeb2b68a051561c35"><div class="ttname"><a href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a></div><div class="ttdeci">#define Q_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01823">qglobal.h:1823</a></div></div>
<div class="ttc" id="classQPatternist_1_1AtomicCasterLocator_html_a4ab34f8fec6d9ab2a06ccededfb61b74"><div class="ttname"><a href="classQPatternist_1_1AtomicCasterLocator.html#a4ab34f8fec6d9ab2a06ccededfb61b74">QPatternist::AtomicCasterLocator::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; AtomicCasterLocator &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qatomiccasterlocator__p_8h_source.html#l00069">qatomiccasterlocator_p.h:69</a></div></div>
<div class="ttc" id="classQExplicitlySharedDataPointer_html_a528078f96b7d557e3cb2bbeaeee34de7"><div class="ttname"><a href="classQExplicitlySharedDataPointer.html#a528078f96b7d557e3cb2bbeaeee34de7">QExplicitlySharedDataPointer::data</a></div><div class="ttdeci">T * data() const</div><div class="ttdoc">Returns a pointer to the shared data object. </div><div class="ttdef"><b>Definition:</b> <a href="qshareddata_8h_source.html#l00145">qshareddata.h:145</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ac9fcf1d1d42f62c4c3676277d80b6385"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">QPatternist::CastingPlatform::targetType</a></div><div class="ttdeci">ItemType::Ptr targetType() const</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00183">qcastingplatform_p.h:183</a></div></div>
<div class="ttc" id="namespaceQTest_html_a3c31a30602a37d9cd63e265fa6420fc1"><div class="ttname"><a href="namespaceQTest.html#a3c31a30602a37d9cd63e265fa6420fc1">QTest::location</a></div><div class="ttdeci">static QTestResult::TestLocation location</div><div class="ttdef"><b>Definition:</b> <a href="qtestresult_8cpp_source.html#l00063">qtestresult.cpp:63</a></div></div>
<div class="ttc" id="classQPatternist_1_1AtomicCaster_html_a5ab267deeceb2adde59c09a0d951a4d6"><div class="ttname"><a href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">QPatternist::AtomicCaster::Ptr</a></div><div class="ttdeci">QExplicitlySharedDataPointer&lt; AtomicCaster &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="qatomiccaster__p_8h_source.html#l00075">qatomiccaster_p.h:75</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a07b5b0d5e291ccaa5442a3c3f72cf9eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b5b0d5e291ccaa5442a3c3f72cf9eb">&#9670;&nbsp;</a></span>prepareCasting()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass , const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::prepareCasting </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ReportContext.html#a7a0ab398e6b17b891b6cf6267c67b2e8">ReportContext::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>sourceType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function should be called at compiled time, it attempts to determine what <a class="el" href="classQPatternist_1_1AtomicCaster.html" title="AtomicCaster is an abstract base class for classes that performs casting between two atomic values of...">AtomicCaster</a> that should be used when casting from <code>sourceType</code> to <a class="el" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType()</a>. If that is not possible, because the <code>sourceType</code> is <code>xs:anyAtomicType</code> for instance, the <a class="el" href="classQPatternist_1_1AtomicCaster.html" title="AtomicCaster is an abstract base class for classes that performs casting between two atomic values of...">AtomicCaster</a> lookup will done at runtime on a case-per-case basis.</p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the requested casting combination is valid or might be valid. If it is guranteed to be invalid, <code>false</code> is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qcastingplatform_8cpp_source.html#l00101">101</a> of file <a class="el" href="qcastingplatform_8cpp_source.html">qcastingplatform.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="qcastingplatform__p_8h_source.html#l00116">QPatternist::CastingPlatform&lt; UntypedAtomicConverter, true &gt;::CastingPlatform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(sourceType);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(context);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span>(*sourceType == *<a class="code" href="classQPatternist_1_1BuiltinTypes.html#ab9b5df0204a8240d829e4f6f2453250f">BuiltinTypes::xsAnyAtomicType</a> ||</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;       *sourceType == *<a class="code" href="classQPatternist_1_1BuiltinTypes.html#a7c3e271f815667a8539036d4a4e94ce3">BuiltinTypes::item</a> ||</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;       *sourceType == *<a class="code" href="classQPatternist_1_1CommonSequenceTypes.html#a5f38b5c4e293f3c0c837b5a3995ab9b9">CommonSequenceTypes::Empty</a> ||</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;       *sourceType == *<a class="code" href="classQPatternist_1_1BuiltinTypes.html#a53cb568d7c73674e753ebc86210af743">BuiltinTypes::numeric</a>)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">/* The type could not be narrowed better than xs:anyAtomicType</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">                        or numeric at compile time. We&#39;ll do lookup at runtime instead. */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">bool</span> castImpossible = <span class="keyword">false</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="classQPatternist_1_1CastingPlatform.html#ab3ea3242b28b42b401ee6eef9dfc870e">m_caster</a> = <a class="code" href="classQPatternist_1_1CastingPlatform.html#afbce82ed1d8df763d395bf415d296c80">locateCaster</a>(sourceType, context, castImpossible, static_cast&lt;const TSubClass *&gt;(<span class="keyword">this</span>), <a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>());</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> !castImpossible;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div><div class="ttc" id="qglobal_8h_html_ac29a7ecc02f777dfeb2b68a051561c35"><div class="ttname"><a href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a></div><div class="ttdeci">#define Q_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01823">qglobal.h:1823</a></div></div>
<div class="ttc" id="classQPatternist_1_1BuiltinTypes_html_a7c3e271f815667a8539036d4a4e94ce3"><div class="ttname"><a href="classQPatternist_1_1BuiltinTypes.html#a7c3e271f815667a8539036d4a4e94ce3">QPatternist::BuiltinTypes::item</a></div><div class="ttdeci">static const ItemType::Ptr item</div><div class="ttdef"><b>Definition:</b> <a href="qbuiltintypes__p_8h_source.html#l00139">qbuiltintypes_p.h:139</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ab3ea3242b28b42b401ee6eef9dfc870e"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ab3ea3242b28b42b401ee6eef9dfc870e">QPatternist::CastingPlatform::m_caster</a></div><div class="ttdeci">AtomicCaster::Ptr m_caster</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00194">qcastingplatform_p.h:194</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ac9fcf1d1d42f62c4c3676277d80b6385"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">QPatternist::CastingPlatform::targetType</a></div><div class="ttdeci">ItemType::Ptr targetType() const</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00183">qcastingplatform_p.h:183</a></div></div>
<div class="ttc" id="classQPatternist_1_1CommonSequenceTypes_html_a5f38b5c4e293f3c0c837b5a3995ab9b9"><div class="ttname"><a href="classQPatternist_1_1CommonSequenceTypes.html#a5f38b5c4e293f3c0c837b5a3995ab9b9">QPatternist::CommonSequenceTypes::Empty</a></div><div class="ttdeci">static const EmptySequenceType::Ptr Empty</div><div class="ttdef"><b>Definition:</b> <a href="qcommonsequencetypes__p_8h_source.html#l00111">qcommonsequencetypes_p.h:111</a></div></div>
<div class="ttc" id="classQPatternist_1_1BuiltinTypes_html_a53cb568d7c73674e753ebc86210af743"><div class="ttname"><a href="classQPatternist_1_1BuiltinTypes.html#a53cb568d7c73674e753ebc86210af743">QPatternist::BuiltinTypes::numeric</a></div><div class="ttdeci">static const AtomicType::Ptr numeric</div><div class="ttdef"><b>Definition:</b> <a href="qbuiltintypes__p_8h_source.html#l00096">qbuiltintypes_p.h:96</a></div></div>
<div class="ttc" id="classQPatternist_1_1BuiltinTypes_html_ab9b5df0204a8240d829e4f6f2453250f"><div class="ttname"><a href="classQPatternist_1_1BuiltinTypes.html#ab9b5df0204a8240d829e4f6f2453250f">QPatternist::BuiltinTypes::xsAnyAtomicType</a></div><div class="ttdeci">static const AtomicType::Ptr xsAnyAtomicType</div><div class="ttdef"><b>Definition:</b> <a href="qbuiltintypes__p_8h_source.html#l00083">qbuiltintypes_p.h:83</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_afbce82ed1d8df763d395bf415d296c80"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#afbce82ed1d8df763d395bf415d296c80">QPatternist::CastingPlatform::locateCaster</a></div><div class="ttdeci">static AtomicCaster::Ptr locateCaster(const ItemType::Ptr &amp;sourceType, const ReportContext::Ptr &amp;context, bool &amp;castImpossible, const SourceLocationReflection *const location, const ItemType::Ptr &amp;targetType)</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform_8cpp_source.html#l00121">qcastingplatform.cpp:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9fcf1d1d42f62c4c3676277d80b6385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9fcf1d1d42f62c4c3676277d80b6385">&#9670;&nbsp;</a></span>targetType()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass, const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1ItemType.html#af1d595e762893d3877b30061df4df297">ItemType::Ptr</a> <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::targetType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qcastingplatform__p_8h_source.html#l00183">183</a> of file <a class="el" href="qcastingplatform__p_8h_source.html">qcastingplatform_p.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="qcastingplatform__p_8h_source.html#l00116">QPatternist::CastingPlatform&lt; UntypedAtomicConverter, true &gt;::CastingPlatform()</a>, and <a class="el" href="qcastingplatform__p_8h_source.html#l00183">QPatternist::CastingPlatform&lt; UntypedAtomicConverter, true &gt;::targetType()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <a class="code" href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a>(static_cast&lt;const TSubClass *&gt;(<span class="keyword">this</span>)-&gt;<a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>());</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>TSubClass *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">targetType</a>();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        }</div><div class="ttc" id="qglobal_8h_html_ac29a7ecc02f777dfeb2b68a051561c35"><div class="ttname"><a href="qglobal_8h.html#ac29a7ecc02f777dfeb2b68a051561c35">Q_ASSERT</a></div><div class="ttdeci">#define Q_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="qglobal_8h_source.html#l01823">qglobal.h:1823</a></div></div>
<div class="ttc" id="classQPatternist_1_1CastingPlatform_html_ac9fcf1d1d42f62c4c3676277d80b6385"><div class="ttname"><a href="classQPatternist_1_1CastingPlatform.html#ac9fcf1d1d42f62c4c3676277d80b6385">QPatternist::CastingPlatform::targetType</a></div><div class="ttdeci">ItemType::Ptr targetType() const</div><div class="ttdef"><b>Definition:</b> <a href="qcastingplatform__p_8h_source.html#l00183">qcastingplatform_p.h:183</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Properties</h2>
<a id="ab3ea3242b28b42b401ee6eef9dfc870e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ea3242b28b42b401ee6eef9dfc870e">&#9670;&nbsp;</a></span>m_caster</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass, const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQPatternist_1_1AtomicCaster.html#a5ab267deeceb2adde59c09a0d951a4d6">AtomicCaster::Ptr</a> <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::m_caster</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qcastingplatform__p_8h_source.html#l00194">194</a> of file <a class="el" href="qcastingplatform__p_8h_source.html">qcastingplatform_p.h</a>.</p>

</div>
</div>
<a id="a0800f65e07ad372a61649ccaff243d76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0800f65e07ad372a61649ccaff243d76">&#9670;&nbsp;</a></span>m_errorCode</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TSubClass, const bool issueError&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classQPatternist_1_1ReportContext.html#afea4f5685a1cdad5ec355ec950a96244">ReportContext::ErrorCode</a> <a class="el" href="classQPatternist_1_1CastingPlatform.html">QPatternist::CastingPlatform</a>&lt; TSubClass, issueError &gt;::m_errorCode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qcastingplatform__p_8h_source.html#l00195">195</a> of file <a class="el" href="qcastingplatform__p_8h_source.html">qcastingplatform_p.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/src/xmlpatterns/expr/<a class="el" href="qcastingplatform__p_8h_source.html">qcastingplatform_p.h</a></li>
<li>/src/xmlpatterns/expr/<a class="el" href="qcastingplatform_8cpp_source.html">qcastingplatform.cpp</a></li>
</ul>
</div><!-- contents -->

<hr class="footer"/><address class="footer"><small><a href="https://dreamswork.github.io/qt4/">Qt 4.8 Source Code Browser</a></small></address>
</body>
</html>
